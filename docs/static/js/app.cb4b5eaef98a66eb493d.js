webpackJsonp([1],{"0MJv":function(e,t){},"1E5t":function(e,t){},"2KQ+":function(e,t){},"3Urz":function(e,t){},"4Zh4":function(e,t){},"9M+g":function(e,t){},BIE3:function(e,t){},DaNL:function(e,t){},G8D9:function(e,t){},GoXV:function(e,t){},IspN:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=n("woOf"),s=n.n(a),i=n("7+uW"),r=n("bOdI"),l=n.n(r),c=n("Dd8w"),d=n.n(c),u=n("oT2G"),p=n.n(u),g=n("NYxO"),f=n("Gu7T"),m=n.n(f),b=n("W3Iv"),h=n.n(b),v=n("//Fk"),_=n.n(v),y=n("mtWM"),x=n.n(y),k=(n("gXvN"),"/api/polki/"),w=x.a.create({baseURL:k}),C=new RegExp("([A-Z]{2}[0-9]{9}[A-Z]{2})"),B=function(e,t){return w.get("authorize",{params:{login:e,techindex:t}}).then(function(e){return e.data.error||"error"==e.data.result?_.a.reject(e.data.resultInfo):e})},$=function(e){return w.get("getRPO",{params:{techindex:e}}).then(function(e){return console.log("fetchDemoRPO",e.data),e.data.error||"error"==e.data.result?_.a.reject(e.data.resultInfo):e}).catch(function(e){return"Network Error"==e.message?_.a.reject("Проблема с сетью, /api/polki/ сервис недоступен"):_.a.reject(e.data?e.data:e.response?e.response.data:e)})},R=function(e,t,n){return C.test(e)?w.get("findBagIndex",{params:{barcode:e,techindex:t,login:n}}).then(function(t){return t.data.error||"error"==t.data.result||"warning"==t.data.result?_.a.reject(t.data.resultInfo):t.data.parentPostIndex?t:_.a.reject("ParentPostIndex not found in response for barcode "+e)}).catch(function(e){return"Network Error"==e.message?_.a.reject("Проблема с сетью, /api/polki/ сервис недоступен"):_.a.reject(e.response?e.response.data:e.data?e.data:e)}):_.a.reject("Неверный формат ШПИ "+e+" !")},O=function(e,t,n){return C.test(e)?w.get("findBagIndex",{params:{barcode:e,techindex:t,login:n}}).then(function(e){return e.data.error||"error"==e.data.result?_.a.reject(e.data):e}).catch(function(e){return"Network Error"==e.message?_.a.reject("Проблема с сетью, /api/polki/ сервис недоступен"):_.a.reject(e.data?e.data:e)}):_.a.reject({resultInfo:"Неверный формат ШПИ "+e+" !",result:"error"})},S=function(e,t,n,o,a,s,i,r,l,c){return w.post("formBag",{login:s,techindex:a,parentPostIndex:e,barcodeList:t,totalWeight:n,bagType:r,taraType:l,sendMethod:o,plombaNum:i,comment:c}).then(function(e){return e.data.error||"error"==e.data.result?_.a.reject(e.data.resultInfo):e.data?e:_.a.reject("CORS Доступ к серверу заблокирован! Проверьте настройки!")})},P=function(e,t,n,o,a,s,i,r,l,c){return w.post("formBagByPacklist",{login:s,techindex:a,parentPostIndex:e,packetList:t,totalWeight:n,bagType:r,taraType:l,sendMethod:o,plombaNum:i,comment:c}).then(function(e){return e.data.error||"error"==e.data.result?_.a.reject(e.data.resultInfo):e.data?e:_.a.reject("CORS Доступ к серверу заблокирован! Проверьте настройки!")})},N=function(e,t,n,o,a,s){return w.post("formPacketList",{login:s,techindex:a,parentPostIndex:e,barcodeList:t,count:n,totalWeight:o,comment:""}).then(function(e){return e.data.error||"error"==e.data.result?_.a.reject(e.data.resultInfo):e.data?e:_.a.reject("CORS Доступ к серверу заблокирован! Проверьте настройки!")})},T=function(e){return w.get("listBagIndexes",{params:{techindex:e}}).then(function(e){return"error"==e.data.result?_.a.reject(e.data.parentPostIndexes):e})},E="static/audio/supermariobros/",M={snd:{},init:function(){var e=this;h()(I.templates).forEach(function(t){e.snd[t[0]]=new Audio(""+E+(t[1].sound?t[1].sound:t[0])+".mp3"),console.debug("snd",t[0],e.snd[t[0]])}),this.snd.pushes=[].concat(m()(new Array(5))),this.snd.pushes.forEach(function(t,n){e.snd.pushes[n]=new Audio(E+"/push"+n+".mp3")})},play:function(e){"push"==e?this.playPush():(this.snd[e].currentTime=0,this.snd[e].play())},pushCnt:0,pushCntTheme:0,playPush:function(){5==this.pushCnt?(this.pushCntTheme=this.pushCntTheme+1,this.pushCntTheme==this.snd.pushes.length&&(this.pushCntTheme=0),this.pushCnt=0,this.snd.pushcool.play()):(this.pushCnt=this.pushCnt+1,this.snd.pushes[this.pushCntTheme].currentTime=0,this.snd.pushes[this.pushCntTheme].play())}},I={thor:0,lastThor:null,lastLed:23,color:"r",printbag:function(e){D.post("/proxy",e)},printbagTest:function(){D.get("/testprint")},templates:{search:{color:"r",duration:1e3,repeat:300,pause:500},push:{color:"r",duration:1e3,repeat:300,pause:500,sound:"push0"},forcepush:{color:"r",duration:1e3,repeat:300,pause:500},pull:{color:"r",duration:100,repeat:3},error_notfound:{color:"r",led:"all",duration:50,repeat:3,brightness:100},error_notplan:{color:"r",led:"all",duration:50,repeat:3,brightness:100},error_expire_keyboard:{color:"r",led:"all",duration:50,repeat:3,brightness:100,sound:"error_notplan"},error_notbind:{color:"r",led:"all",duration:50,repeat:3,brightness:100},error:{color:"r",led:"all",duration:100,repeat:3,brightness:100},selectbag:{color:"all",duration:500,repeat:1e3,autoOff:"all"},deselectbag:{color:"all",duration:100,repeat:3,autoOff:"all"},formb:{color:"all",duration:100,repeat:3,autoOff:"all",sound:"closebag"},formbag:{color:"all",duration:100,repeat:3,autoOff:"all",sound:"closebag"},formbagbypacklist:{color:"all",duration:100,repeat:3,autoOff:"all",sound:"closebag"},bind:{color:"all",duration:5e3,pause:100,repeat:0},bindstart:{color:"all",led:"all",duration:1e3,brightness:100},bindend:{color:"all",led:"all",duration:100,repeat:3,brightness:100},login:{color:"r",led:"all",duration:100,brightness:100,repeat:3},logout:{color:"r",led:"all",duration:100,brightness:100,repeat:3},registerpoint:{color:"all",led:"all",duration:1e3,brightness:100,repeat:3},deletepoint:{color:"all",duration:100,repeat:3,sound:"registerpoint"}},xon:function(e){var t=e.status,n=e.color,o=e.led,a=e.thor;console.debug("LED ON",t,n,o,a);var s=this.templates[t];s.led=o,s.color=n.toLowerCase(),D.get("/on",{params:s},a)},xoff:function(e){console.debug("LED OFF",e),e=e?e.toLowerCase():"all",D.get("/off",{params:{led:"all",color:e}})}},D={axioses:[],size:24,lastThorColors:{},init:function(e,t,n,o,a){for(var s in console.log("urls %o size:[%s] lastLed:[%s] isLedOn:[%s]",e,n,o,t),this.size=n,this.axioses=[],e)if(""!=e[s]){console.log("==>",e[s]);var i=x.a.create({baseURL:"http://"+e[s],timeout:1e3});i.interceptors.response.use(function(e){return e},a),this.axioses.push(i),I.lastThor=this.axioses.length-1}M.init(),t||this.onInit(this.axioses)},onInit:function(e){console.debug("not overloaded onInit",e)},get:function(e,t,n){if(!t.params||"all"!=t.params.led&&"random"!=t.params.led)return this.resetColors(t.params,n),this.axioses[n](e,t);for(var o in this.axioses)this.axioses[o](e,t)},post:function(e,t,n){return this.axioses[n](e,t)},resetColors:function(e,t){var n=this.lastThorColors[e.color];null!=n&&n.thor!=t&&this.axioses[n.thor]("/off",{params:{color:e.color,led:n.led}}),this.lastThorColors[e.color]={thor:t,led:e.led}}},K={name:"Keyboard",data:function(){return{keyText:""}},created:function(){window.addEventListener("keydown",this.documentKeydown)},beforeDestroy:function(){window.removeEventListener("keydown",this.documentKeydown)},mounted:function(){this.value&&this.encode()},methods:d()({},Object(g.b)(["$setColor"]),{documentKeydown:function(e){var t=this;if(!(e.target.className.indexOf("nokeyboard")>=0)){if(e.keyCode>=96&&e.keyCode<=105?this.keyText+=String.fromCharCode(e.keyCode-48):e.keyCode>=65&&e.keyCode<=90?this.keyText+=String.fromCharCode(e.keyCode+(e.shiftKey?0:32)):e.keyCode>=48&&e.keyCode<=57?this.keyText+=String.fromCharCode(e.keyCode):110!=e.keyCode&&190!=e.keyCode||(this.keyText+="."),8==e.keyCode&&(this.keyText=this.keyText.slice(0,-1)),console.debug("documentKeydown",this.keyText,e.keyCode,String.fromCharCode(e.keyCode)),13==e.keyCode){var n=this.keyText.substr(0,1),a="R";if(14==this.keyText.length)"gb".indexOf(a=n)>=0&&(a=a.toUpperCase(),this.keyText=this.keyText.slice(1),console.debug("color change detected",this.keyText,a));13==this.keyText.length?console.debug("emitting 13 len key text",this.keyText,a):this.$bus.$emit("keyboard:keydown:enter:"+n,this.keyText,a),""!=this.keyText&&(this.$bus.$emit("keyboard:keydown:enter:"+this.keyText.length,this.keyText,a),this.$bus.$emit("keyboard:keydown:enter",this.keyText,a),this.keyText="",e.preventDefault())}window.clearTimeout(o),o=window.setTimeout(function(){t.keyText="",M.play("error_expire_keyboard")},1e3)}}})},L=n("XyMi");var Z,z=function(e){n("0MJv")},j=Object(L.a)(K,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"keyboard"},[this._v(this._s(this.keyText))])},[],!1,z,null,null).exports,A=n("fZjL"),W=n.n(A),U=n("gRE1"),q=n.n(U);function F(e,t,n){var o=e.findIndex(function(e){return t==e.ppi});if(o<0&&(o=function(e,t){var n=e.findIndex(function(e){return e.ppi.startsWith("#")});n>-1&&(e[n].ppi=t);return n}(e,t)),o<0)throw"Индекс назначения "+t+" не привязан ни к одной корзине!";return o}function G(e,t){console.debug("checkUniqueBarcode",t),e.every(function(e){if(e.wpi[t])throw console.debug("found dublicate checkUniqueBarcode--\x3e",e.wpi,t,e.wpi[t]),"Отправление "+t+" уже лежит в ячейке "+e.ppi+" !";return!0})}function Y(e){return function(e,t,n){return e&&t[e]||n}(e,{G:"success",B:"primary",random:"dark"},"danger")}var H,V={state:{barcode:null,response:null,closeResponse:null,error:null,selected:null,inserted:null,status:null,index:null,consoles:{R:{req:null,color:"R",bgColor:"danger"}}},getters:{getConsoles:function(e,t){return e.consoles},getBags:function(e,t){return t.getSettingsSelected?t.getSettingsSelected.bags:null},getResponse:function(e){return e.response},getCloseResponse:function(e){return e.closeResponse},getSelected:function(e){return e.selected},getWeight:function(e,t){return t.getSelectedBag?q()(t.getSelectedBag.wpi).reduce(function(e,t){return e+(t.weight?t.weight:0)},0):null},getSelectedBag:function(e,t){if(e.selected)return t.getBags[t.cursor]},getInserted:function(e,t){if(e.inserted||e.selected)return t.getBags.findIndex(function(t){return(e.selected?e.selected:e.inserted)==t.ppi})},cursor:function(e,t){if(e.selected)return t.getBags.findIndex(function(t){return e.selected==t.ppi})},thor:function(e,t){return void 0!==t.getInserted?Math.floor(t.getInserted/24):0},bagMetaData:function(e,t){if(t.getSelectedBag)return t.getSelectedBag.wpi[W()(t.getSelectedBag.wpi)[0]]}},actions:{$clear:function(e){e.commit,e.dispatch;var t=e.state;e.getters;console.debug("clearing"),t.response=null,t.barcode=null,t.status=null,t.error=null},$clearSelected:function(e){e.commit,e.dispatch;var t=e.state;e.getters;t.selected=null},$clearInserted:function(e){e.commit,e.dispatch,e.state;e.getters.getBags.forEach(function(e,t){i.default.delete(e,"color")})},$clearCloseResponse:function(e){e.commit,e.dispatch;var t=e.state;e.getters;t.closeResponse=null},$selectBag:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.ppi;return new _.a(function(e,t){try{F(a.getBags,s),o.selected=s,o.inserted=s,I.xon({status:"selectbag",color:"all",led:a.getSelectedBag.led,thor:a.thor}),n("$consoleStatus",{color:"R",req:{status:"selectbag"}}),e(s)}catch(e){o.error=e,o.status="error",t(e)}})},$deselectBag:function(e){e.commit;var t=e.dispatch,n=e.state,o=e.getters;t("$consoleStatus",{color:"all",req:{status:"deselectbag"}}),I.xon({status:"deselectbag",color:"all",led:o.getSelectedBag.led,thor:o.thor}),window.setTimeout(function(){n.selected=null},50)},$removeWpi:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.barcode;console.log("removeWpi",s),confirm("Вы уверены что хотите удалить "+s)&&(i.default.delete(a.getSelectedBag.wpi,s),o.status="pull",n("$save"))},$removeB:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.b;console.log("removeB",s),confirm("Вы уверены что хотите удалить "+s)&&(a.getSelectedBag.batch.splice(s,1),o.status="pull",n("$save"))},$forcePutToBag:function(e,t){e.commit;var n,o=e.dispatch,a=e.state,s=e.getters,r=t.barcode;if(!((r=r.toUpperCase().replace(/\s/g,""))in s.getSelectedBag.wpi))return O(r,s.getDepcode,s.getUser?s.getUser.login:null).then(function(e){G(s.getBags,r),n=e.data,o("$consoleStatus",{color:"R",req:{status:"forcepush",response:n}}),console.debug("2 forcePutToBag barcode",r,n.parentPostIndex);var t=s.getSelectedBag;return s.getBags.forEach(function(e,o){e.ppi==t.ppi&&(n.forcepush=!0,i.default.set(e.wpi,r,n))}),o("$save"),n}).catch(function(e){e=e.message?e.message:e.resultInfo,o("$consoleStatus",{color:color,req:{barcode:r,status:"error",response:e,error:e}})});a.status="pull",i.default.delete(s.getSelectedBag.wpi,r),o("$save")},$putToBag:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.barcode,r=t.color;return s=s.toUpperCase().replace(/\s/g,""),n("$consoleStatus",{color:r,req:{status:"search",response:null,barcode:s}}),R(s,a.getDepcode,a.getUser?a.getUser.login:null).then(function(e){return e=e.data,G(a.getBags,s),F(a.getBags,e.parentPostIndex,s),n("$consoleStatus",{color:r,req:{status:"push",response:e}}),a.getBags.forEach(function(t,n){t.color&&t.color[r]&&i.default.delete(t.color,r),t.ppi==e.parentPostIndex&&(o.inserted=t.ppi,i.default.set(t.wpi,s,e),t.color||i.default.set(t,"color",{}),i.default.set(t.color,r,Y(r)),I.xon({status:"push",color:r,led:t.led,thor:a.thor}))}),n("$save"),e}).catch(function(e){throw e=e.message?e.message:e,n("$consoleStatus",{color:r,req:{barcode:s,status:"error",response:null,error:e}}),a.getBags.forEach(function(t,n){t.isErrorBag&&(o.inserted=t.ppi,i.default.set(t.wpi,s,e),t.color||i.default.set(t,"color",{}),i.default.set(t.color,r,Y(r)),I.xon({status:"error",color:r,led:t.led,thor:a.thor}))}),n("$save"),e})},$formBag:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.ppi,r=t.wpi,l=t.weight,c=t.sendmeth,d=t.plomba,u=t.bagType,p=t.taraType,g=t.comment;return console.debug("formBag",s,r,l,c,d,u,p,g),l=(1e3*Number(l)).toFixed(0),S(s,r,l,String(c),a.getDepcode,a.getUser.login,String(d),String(u),String(p),g).then(function(e){return o.closeResponse=e.data,i.default.set(a.getSelectedBag,"wpi",{}),i.default.set(a.getSelectedBag,"closeResponse",o.closeResponse),o.status="formbag",n("$save"),e.data}).catch(function(e){return console.error("error",e),o.status="error",o.error=e.response?e.response.data:e.message||e,_.a.reject(o.error)})},$formBagByPacklist:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.ppi,r=t.packList,l=t.weight,c=t.sendmeth,d=t.plomba,u=t.bagType,p=t.taraType,g=t.comment;return console.debug("formBagByPacklist",s,r,l,c,d,u,p,g),l=(1e3*Number(l)).toFixed(0),P(s,r,l,String(c),a.getDepcode,a.getUser.login,String(d),String(u),String(p),g).then(function(e){return console.log(e.data),o.closeResponse=e.data,i.default.set(a.getSelectedBag,"batch",[]),i.default.set(a.getSelectedBag,"closeResponse",o.closeResponse),o.status="formbagbypacklist",n("$save"),e.data}).catch(function(e){return console.error("error",e),o.status="error",o.error=e.response||e.message||e,_.a.reject(o.error)})},$formB:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.ppi,r=t.wpi;return console.debug("formB",s,r,r.length),N(s,r,r.length,String(a.getWeight),a.getDepcode,a.getUser.login).then(function(e){return null==a.getSelectedBag.batch&&(a.getSelectedBag.batch=[]),a.getSelectedBag.batch.push(e.data),i.default.set(a.getSelectedBag,"wpi",{}),o.response=e.data,o.status="formb",n("$save"),e.data}).catch(function(e){return console.error("error",e),o.status="error",o.error=e.response||e.message||e,_.a.reject(o.error)})},$remapPpi:function(e,t){e.commit,e.dispatch;var n=e.state,o=e.getters,a=t.i,s=t.ppi;if(console.debug("calibrateMapBagBarcode",s,a),i.default.set(o.getConfig.bags[a],"ppi",s),n.status="bindinline",o.getConfig.sortplan){var r=o.getConfig.sortplan.find(function(e){return e.techindex==s});r?i.default.set(o.getConfig.bags[a],"ppn",r.nameRu):console.debug("calibrateMapBagBarcode not found ppi in sortplan",s)}},$consoleStatus:function(e,t){var n=e.commit,o=(e.dispatch,e.state),a=e.getters,s=t.color,r=t.req;console.debug("consoleStatus",s,r.status),M.play(r.status),"all"!=s&&(n("CONSOLE_SET",{color:s,req:r}),o.consoles[s].timeout=setTimeout(function(){n("CONSOLE_CLEAR",s),a.getBags.forEach(function(e,t){e.color&&e.color[s]&&i.default.delete(e.color,s)})},r.error?5e3:1e4))}},mutations:(Z={},l()(Z,"PUSH_TO_BAG",function(e,t,n,o){}),l()(Z,"CLEAR_BAG",function(e,t){i.default.set(e.bags,t,{})}),l()(Z,"STATUS_SET",function(e,t){}),l()(Z,"CONSOLE_SET",function(e,t){e.consoles[t.color]||i.default.set(e.consoles,t.color,{req:null,color:t.color,bgColor:Y(t.color)}),e.consoles[t.color]&&e.consoles[t.color].timeout&&clearTimeout(e.consoles[t.color].timeout),e.consoles[t.color].req=t.req}),l()(Z,"CONSOLE_CLEAR",function(e,t){e.consoles[t]&&e.consoles[t].timeout&&clearTimeout(e.consoles[t].timeout),e.consoles[t].req=null}),Z)},Q=n("Xxa5"),X=n.n(Q),J=n("exGp"),ee=n.n(J),te=n("KorX"),ne=n.n(te),oe=(n("C/3r"),this),ae={result:"success",techindex:"055990",parentPostIndexes:[{nameRu:"УОДП-8 г.Алматы",techindex:"800508",isOfficial:!1},{nameRu:"Алматы-35",techindex:"050035",isOfficial:!1},{nameRu:"Алматы-30",techindex:"050030",isOfficial:!1},{nameRu:"УОиДП №6 г.Алматы",techindex:"800506",isOfficial:!1},{nameRu:"Алматы-63",techindex:"050063",isOfficial:!1},{nameRu:"Алматы-18",techindex:"050018",isOfficial:!1},{nameRu:"Алматы-31",techindex:"050031",isOfficial:!1},{nameRu:"Алматы-32",techindex:"050032",isOfficial:!1},{nameRu:"Алматы-56",techindex:"050056",isOfficial:!1},{nameRu:"УДОП-3 г.Алматы",techindex:"800503",isOfficial:!1},{nameRu:"Алматы-7",techindex:"050007",isOfficial:!1},{nameRu:"Алматы-23",techindex:"050023",isOfficial:!1},{nameRu:"Алматы-47",techindex:"050047",isOfficial:!1},{nameRu:"УОДП-9 г.Алматы",techindex:"800509",isOfficial:!1},{nameRu:"Алматы-40",techindex:"050040",isOfficial:!1},{nameRu:"Алматы-19",techindex:"050019",isOfficial:!1},{nameRu:"Алматы-46",techindex:"050046",isOfficial:!1},{nameRu:"Алматы-5",techindex:"050005",isOfficial:!1},{nameRu:"Алматы-8",techindex:"050008",isOfficial:!1},{nameRu:"Алматы-17",techindex:"050017",isOfficial:!1},{nameRu:"Алматы-52",techindex:"050052",isOfficial:!1},{nameRu:"УДОП 2 г.Алматы",techindex:"800502",isOfficial:!1},{nameRu:"УОиДП-5 г.Алматы",techindex:"800505",isOfficial:!1},{nameRu:"Алматы-28",techindex:"050028",isOfficial:!1},{nameRu:"Алматы-53",techindex:"050053",isOfficial:!1},{nameRu:"Центр по выдаче почтовых отправлений г.Алматы",techindex:"800510",isOfficial:!1},{nameRu:"Алматы-27",techindex:"050027",isOfficial:!1},{nameRu:"Алматы-64",techindex:"050064",isOfficial:!1},{nameRu:"Алматы-71",techindex:"050071",isOfficial:!1},{nameRu:"Алматы-36",techindex:"050036",isOfficial:!1},{nameRu:"Алматы-65",techindex:"050065",isOfficial:!1},{nameRu:"Алматы-67",techindex:"050067",isOfficial:!1},{nameRu:"Алматы-69",techindex:"050069",isOfficial:!1},{nameRu:"УОиДП-7 г.Алматы",techindex:"800507",isOfficial:!1},{nameRu:"Алматы-58",techindex:"050058",isOfficial:!1},{nameRu:"Алматы-26",techindex:"050026",isOfficial:!1},{nameRu:"Алматы-70",techindex:"050070",isOfficial:!1},{nameRu:"УДОП-4 г.Алматы",techindex:"800504",isOfficial:!1},{nameRu:"Алматы-9",techindex:"050009",isOfficial:!1},{nameRu:"Алматы-6",techindex:"050006",isOfficial:!1},{nameRu:"Алматы-38",techindex:"050038",isOfficial:!1},{nameRu:"Алматы-62",techindex:"050062",isOfficial:!1},{nameRu:"УД и ПП Алматински почтамт",techindex:"800519",isOfficial:!1},{nameRu:"Алматы-44",techindex:"050044",isOfficial:!1}]},se={result:"success",mails:["RN057495927KZ","RN056452942KZ","VS051508534KZ","VS051510422KZ","VS051524435KZ","RN056453157KZ","RN056454461KZ","RN056448982KZ","RN056826874KZ","RN057495900KZ","RN052056946KZ","RN056827605KZ","RN057497137KZ","RN056424456KZ","BP050108725KZ","RN053293249KZ","BP050108901KZ","RN057497168KZ","BP050108760KZ","RN057478314KZ","RN057478623KZ","RN057497239KZ","RN057478376KZ","RN056453072KZ","BP050110410KZ","BP050110162KZ","RN057495799KZ","RR131616464CN","RN056423963KZ","RN051966353KZ","RN052055702KZ","RN056105188KZ","RN056815655KZ","RN056815647KZ","RN052054605KZ","RN056817166KZ","RN056817121KZ","RN052054741KZ","BP050023715KZ","CO053968175KZ","RN053295647KZ","RN052055693KZ","RN052055716KZ","RN052055747KZ","RN052055755KZ","RN052055764KZ","RN052055778KZ","RN053297166KZ","RN052055818KZ","RN052055821KZ","BP050107265KZ","BP050107248KZ","BP050104683KZ","RN051966375KZ","RN051966384KZ","RN051966415KZ","RN051966424KZ","RN051966438KZ","RN056816262KZ","BP050092804KZ","BP050092818KZ","RN051966557KZ","RN053295678KZ","RN053295664KZ","RN057475556KZ","RN057475542KZ","RN057475573KZ","RN057475560KZ","RN056456825KZ","RN053416552KZ","RN056456839KZ","RN053295602KZ","RN056805874KZ","RN055763532KZ","RN056456900KZ","RN051966565KZ","RN051966574KZ","RC053358877KZ","RN056816395KZ","RN056805959KZ","RN053295695KZ","RN053295545KZ","RN056457026KZ","RN056457012KZ","RN056456961KZ","RN056457088KZ","RN056457074KZ","RN053416455KZ","BP050092835KZ","BP050092821KZ","BP050096307KZ","BP050096315KZ","BP050096324KZ","BP050096338KZ","RN052055035KZ","RN056457216KZ","RN056457202KZ","RN056457247KZ","RN056457233KZ","RN056457295KZ"]},ie=new ne.a(w,{delayResponse:50}).onGet("authorize").reply(function(e){return console.log("authorize",e.params),"test.ast17.sc1"==e.params.login?[200,{result:"success",name:"demo:Мырзанова Гульмира"}]:"test"==e.params.login?[200,{result:"success",name:"demo:Азамат Алимбаев"}]:[200,{result:"error",resultInfo:"demo:user by login not found"}]}).onGet("getRPO").reply(function(e){return"000000"==e.params.techindex?[200,{result:"error",resultInfo:"demo:techindex not found"}]:[200,se]}).onAny("listBagIndexes").reply(function(e){return"000000"==e.params.techindex?[200,{result:"error",resultInfo:"demo:techindex not found"}]:[200,ae]}).onAny("findBagIndex").reply((H=ee()(X.a.mark(function e(t){var n,o,a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params,(o=Math.ceil(10*Math.random())<5?se.mails.findIndex(function(e){return e==n.barcode})%ae.parentPostIndexes.length:0)<0&&(o=Math.floor(ae.parentPostIndexes.length*Math.random())),console.debug("findBagIndex",n,o),a={result:"success",parentPostIndex:ae.parentPostIndexes[o].techindex,postIndex:Math.ceil(1e4*Math.random()),postIndexTitle:"DEMO Алматы-"+Math.ceil(10*Math.random()),weight:Math.ceil(1e3*Math.random()),typeName:"Письмо РК",mailInfo:{mailCategory:"1",mailId:n.barcode,toFullName:"DEMO КАЗ НПУ ИМ АБАЯ ",toStreet:"DEMO ПР ДОСТЫК 13 Г АЛМАТЫ ",mailStatus:"Registered",mailType2:"P101",storagePaymentPaid:!1,returnPaymentPaid:!1,selfPaymentPaid:!1,notices:0,finMonBlock:!1,isPartialRedemption:!1}},!(100*Math.random()<70)){e.next=9;break}return e.abrupt("return",[200,a]);case 9:if(!(100*Math.random()<70)){e.next=13;break}return e.abrupt("return",[200,{result:Math.ceil(10*Math.random())>5?"error":"warning",resultInfo:"DEMO:Отправление "+n.barcode+" не относится к сортплану!",weight:Math.ceil(1e3*Math.random()),typeName:"Письмо РК"}]);case 13:return e.abrupt("return",[200,{result:"error",resultInfo:"DEMO:Отправление "+n.barcode+" не найдено!"}]);case 14:case"end":return e.stop()}},e,oe)})),function(e){return H.apply(this,arguments)})).onAny("formBag").reply(function(e){var t=JSON.parse(e.data);return console.debug("formBag",t),[200,{result:"success",packetListNo:"B20191007"+Math.ceil(1e4*Math.random()),labelListNo:"G201910072104795",actualWeight:t.totalWeight,workerName:t.login,fromDepartment:"АФ АО «Казпочта» «Алматинский почтамт»",toDepartment:"Алматы-9",route:1==t.sendMethod?"Наземный":"Авиа",sendMethod:t.sendMethod,date:new Date,count:t.barcodeList.length,totalWeight:t.totalWeight,fromTechindex:"055990",toTechindex:"050009",techindex:"055990",bagType:t.bagType,taraType:t.taraType,plombaNum:t.plombaNum,comment:"DEMO:"+t.comment}]}).onAny("formBagByPacklist").reply(function(e){var t=JSON.parse(e.data);return console.debug("formBagByPacklist",t),[200,{result:"success",labelListNo:"G2020"+Math.ceil(1e5*Math.random()),actualWeight:t.totalWeight,workerName:t.login,date:new Date,count:t.packetList.length,packetListCount:t.packetList.length,toTechindex:"050009",toDepartment:"Алматы-9",totalWeight:t.totalWeight,fromTechindex:"055990",techindex:"055990",fromDepartment:"АФ АО «Казпочта» «Алматинский почтамт»",route:1==t.sendMethod?"Наземный":"Авиа",sendMethod:t.sendMethod,bagType:t.bagType,taraType:t.taraType,plombaNum:t.plombaNum,comment:"DEMO:"+t.comment}]}).onAny("formPacketList").reply(function(e){var t=JSON.parse(e.data);return console.debug("formPacketList",t),[200,{packetListNo:"B20201007"+Math.ceil(1e4*Math.random()),workerName:t.login,date:new Date,totalWeight:"10000",actualWeight:42,fromDepartment:"АФ АО «Казпочта» «Алматинский почтамт»",toDepartment:"Алматы-40",fromTechindex:"055990",toTechindex:"050040",comment:"",result:"success",count:t.barcodeList.length,techindex:"055990"}]}).onAny().reply(function(e){var t=e.params;return console.debug("Mock any",t),[500,{error:"DEMO:Mock no rule found"}]}),re=[];D.onInit=function(e){console.debug("$device.onInit",e),e.forEach(function(e,t){re[t]=new ne.a(e).onAny().reply(function(e){return console.debug("led mock received "+t,e.url,e.params),i.default.$bus.$emit("mock:led",e.params,t),[200,null]})})};var le=function(e){console.log("Populating"),e.settings.add({id:1,depcode:null,size:24,bindscan:1500,mockdelay:!0,demoerror:!0,isDemo:!1,isLedOn:!0,isWindowsPrint:!0,isPrintProxy:!1,isRotate:!0,isAutoPrint:!1,user:null,apiUrl:"/api/polki/",printer:"192.168.1.40",broker:"192.168.10.1",leds:["192.168.10.10","192.168.10.10","192.168.10.10"],meta_:{updated:new Date},sortplan:null,users:["test.alm21.rpo1","test.ast17.sc1","test","aza","tima","zarina"],bags:null})},ce=new p.a,de={name:"SortplanModal",computed:d()({},Object(g.c)({sortplan:"getSortplan",depcode:"getDepcode",config:"config"})),mounted:function(){this.fetch()},data:function(){return{status:null,error:null}},methods:d()({},Object(g.b)(["$fillBags","$fetchSortplan"]),{encode:function(e){return ce.encode(e)},fillBags:function(e){confirm("Сортплан будет изменен! Вы уверены ?")&&(this.$fillBags(e),this.$emit("hide"))},fetch:function(e){var t=this;console.log("fetching"),this.status="loading",this.error=null,this.$fetchSortplan({depcode:this.depcode}).then(function(e){t.status=e}).catch(function(e){t.error=e,t.$emit("hide")})}})};var ue=function(e){n("Tpzo"),n("U1KQ")},pe=Object(L.a)(de,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sortplan?n("b-modal",{ref:"msortplan",attrs:{id:"msortplan","header-bg-variant":"primary","header-text-variant":"white",visible:"visible",scrollable:"scrollable","ok-title":"Печать","ok-only":"ok-only",title:"Сортплан",size:"lg"},on:{hide:function(t){e.$emit("hide")}}},[n("template",{slot:"modal-title"},[e._v("Сортплан для Индекса "+e._s(e.depcode)+" "),n("span",[e._v("кол-во направлений "+e._s(e.sortplan.length))])]),n("template",{slot:"modal-footer"},[n("b-dropdown",{attrs:{split:"split","split-variant":"primary",variant:"outline-primary"},on:{click:e.$print}},[n("template",{slot:"button-content"},[n("i",{staticClass:"fa fa-print mr-2"}),e._v("Печать")]),n("b-dropdown-item",{on:{click:function(t){e.fillBags({plan:e.sortplan})}}},[e._v(" Загрузить сортплан")])],2)],1),n("div",{staticClass:"mx-4 mb-4 text-center",attrs:{id:"printSection"}},[n("b-card-group",{staticClass:"sortplan",attrs:{deck:"deck"}},e._l(e.sortplan,function(t){return n("b-card",{key:t.techindex,attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b",[e._v(e._s(t.techindex)+" ")]),n("div",[e._v(e._s(t.nameRu))])]),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode("p"+t.techindex)))])],2)}))],1)],2):e._e()},[],!1,ue,null,null).exports,ge={methods:{calibrateStart:function(){this.bind.cursor=-1,M.play("bindstart"),this.calibrateNext()},calibrateStop:function(){this.bind.cursor=null,this.bind.selectedBag=null,M.play("bindend"),this.clearAll(),this.$clearSelected(),this.$save()},calibrateMapBagBarcode:function(e){if(null!==this.bind.selectedBag&&!this.bind.selectedBag.isErrorBag){console.debug("calibrateMapBagBarcode",e,this.bind.selectedBag);var t=this.bind.selectedBag;this.$remapPpi({i:t,ppi:e})}},calibrateMap:function(e){this.bind.selectedBag=e,i.default.set(this.bags[e],"led",this.bind.cursor),this.calibrateNext()},calibrateNext:function(){this.bind.cursor++,console.log("THOR",this.tabIndex),this.ledOn&&I.xon({status:"bind",color:"all",led:this.bind.cursor,thor:this.tabIndex})}}},fe=n("q7Xt"),me=n.n(fe),be=new p.a,he={name:"YarlikPrintTemplate",props:["isCloseModalOpen","response"],computed:d()({},Object(g.c)({config:"getConfig"})),data:function(){return{sendmethTypes:{1:"Наземный",2:"Авиа"},sendmeth:2,plomba:null,bagTypes:{20:"Мешок Сактандыру",2:"Заказная корреспонденция",12:"Правительственная письменная коррeспонденция",19:"Письменная корреспонденция",18:"Порожняя тара",15:"Мешок с отправлениями EMS",13:"Мешок с международной письменной корреспонденцией",3:"Постпакет внутренний",1:"Группа РПО"},taraTypes:{1:"Мешок",2:"Ящик"},bagType:2,taraType:1}},methods:{encode:function(e){return be.encode(e)},mapSpr:function(e,t){if(e)return t[e]},print:function(){if(this.config.isPrintProxy){var e=document.getElementById("printSection").innerText;e=(e=me()().transform(e)).replace("қ","k"),$leds.printbag(e)}else this.$print()},printTest:function(){$leds.printbagTest(),this.clear()}}};var ve=function(e){n("BIE3")},_e=Object(L.a)(he,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.response?n("pre",{staticClass:"text-primary mb-0 yarlik",attrs:{id:"printSection"}},[e.config.isWindowsPrint?[n("div",[n("b",[e._v("ВИД ЗАДЕЛКИ       ")]),n("span",[e._v(e._s(e.mapSpr(e.response.bagType,e.bagTypes)))])]),n("div",[n("b",[e._v("G НАКЛАДНАЯ       ")]),n("span",[e._v(e._s(e.response.labelListNo))])]),e.response.packetListNo?n("div",[n("b",[e._v("Б НАКЛАДНАЯ       ")]),n("span",[e._v(e._s(e.response.packetListNo))])]):e._e(),n("div",[n("b",[e._v("ПЛОМБА            ")]),n("span",[e._v(e._s(e.response.plombaNum))])]),n("div",[n("b",[e._v("СПОСОБ ПЕРЕСЫЛКИ  ")]),n("span",[e._v(e._s(e.mapSpr(e.response.sendMethod,e.sendmethTypes))+"  ")]),n("b",[e._v("    ВИД ТАРЫ ")]),n("span",[e._v(e._s(e.mapSpr(e.response.taraType,e.taraTypes)))])]),n("div",[n("b",[e._v("ОТКУДА ")]),n("span",[e._v("["+e._s(e.response.fromTechindex)+"] "+e._s(e.response.fromDepartment))])]),n("div",[n("b",[e._v("КУДА   ")]),n("span",[e._v("["+e._s(e.response.toTechindex)+"] "+e._s(e.response.toDepartment))])]),n("div",[n("b",[e._v("ВЕС МЕШКА ")]),n("span",[e._v(e._s(e._f("kg")(e.response.totalWeight))+"кг")]),n("b",[e._v("  ВЕС НЕТТО ")]),n("span",[e._v(e._s(e._f("kg")(e.response.actualWeight))+"кг")]),n("b",[e._v("  КОЛ-ВО ")]),n("span",[e._v(e._s(e.response.count)+" ")])]),n("div",[e._v("═══════════════════════════════════════════════")]),n("div",[n("b",[e._v("ДАТА ")]),n("span",[e._v(e._s(e.response.date.substr(0,10))+"  ")]),n("b",[e._v("СОЗДАЛ ")]),n("span",[e._v(e._s(e.response.workerName))])]),e.response.comment?n("div",[n("b",[e._v("КОММЕНТАРИЙ ")]),n("span",[e._v(e._s(e.response.comment))])]):e._e(),n("div",[e._v("═══════════════════════════════════════════════")]),n("div",{staticClass:"barcode ml-4"},[e._v(e._s(e.encode(e.response.labelListNo)))]),n("h5",[e._v("         "+e._s(e.response.labelListNo))])]:[e._v('N\nq720\nj555\nl8,C,001\nX0,40,4,710,640\n \nA20,60,0,5,1,1,N,"'+e._s(e.response.route)+'"\nA20,120,0,4,1,1,N,"KYDA"\nA300,120,0,4,1,1,N,"'+e._s(e.response.toDepartment)+'"\n \nA20,150,0,4,1,1,N,"OT"\nA300,150,0,4,1,1,N,"'+e._s(e.response.fromDepartment)+'"\n \nA20,180,0,4,1,1,N,"BEC '+e._s(e.response.actualWeight)+'"\nA300,180,0,4,1,1,N,"'+e._s(e.response.count)+' Kolvo"\n \nA20,210,0,4,1,1,N,""\n \nB20,240,0,1,2,2,100,B,"'+e._s(e.response.packetListNo)+'"\n \nA20,480,0,4,1,1,N,"COTPYDHNK"\nA300,480,0,4,1,1,N,"'+e._s(e.response.workerName)+'"\nA380,480,0,4,1,1,N,"_______________"\n \nA20,510,0,1,1,1,N,"© 2018 Powered by SORTRACK®, KAZPOST INC"\nP1\nN              ')]],2):e._e()},[],!1,ve,null,null).exports,ye=new p.a,xe={name:"CloseModal",props:["isCloseModalOpen"],mounted:function(){this.$bus.$on("keyboard:keydown:enter:p",this.next),this.$bus.$on("keyboard:keydown:enter:c",this.crateEnter),this.$bus.$on("keyboard:keydown:enter",this.weightEnter)},beforeDestroy:function(){this.$bus.$off("keyboard:keydown:enter:p",this.next),this.$bus.$off("keyboard:keydown:enter:c",this.crateEnter),this.$bus.$off("keyboard:keydown:enter",this.weightEnter)},computed:d()({},Object(g.c)({response:"getCloseResponse",selected:"getSelected",config:"getConfig",demo:"getDemo",error:"getCloseError",selectedBag:"getSelectedBag",bags:"getBags",weightTotal:"getWeight",cursor:"cursor"}),{comment:function(){return this.crateId?"Ящик номер "+this.crateId:""},disabledB:function(){return!this.weight||this.weight>15||!this.plomba||this.buttonPending},disabledP:function(){return this.count<1||this.buttonPending},count:function(){return W()(this.selectedBag.wpi).length},batchCount:function(){return this.selectedBag.batch?this.selectedBag.batch.length:0}}),data:function(){return{isEditing:!1,buttonPending:!1,bresponse:null,wpi:null,tabIndex:0,crateId:null,tempPpi:null,weight:null,batch:null,sendmethTypes:{1:"Наземный",2:"Авиа"},sendmeth:1,plomba:null,bagTypes:{20:{val:"Мешок Сактандыру",text:"Сактандыру"},2:{val:"Заказная корреспонденция",text:"Заказной"},12:{val:"Правительственная письменная коррeспонденция",text:"Правительственный"},19:{val:"Письменная корреспонденция",text:"Письменный"},18:{val:"Пороженная тара",text:"Пороженный"},15:{val:"Мешок с отправлениями EMS",text:"EMS"},13:{val:"Мешок с международной письменной корреспонденцией",text:"Международный"},3:{val:"Постпакет внутренний",text:"Постпакет"},1:{val:"Группа РПО",text:"Группа"}},taraTypes:{1:"Мешок",2:"Ящик"},bagType:2,taraType:1}},methods:d()({},Object(g.b)(["$formBag","$formBagByPacklist","$formB","$clear","$deselectBag","$save","$selectBag","$deselectBag","$forcePutToBag","$removeWpi","$removeB","$clearCloseResponse"]),{encode:function(e){return ye.encode(e)},showBatchContent:function(e,t){this.batch=e,this.batch.i=t,this.$bvModal.show("mclosebagwpi")},formB:function(){var e=this;this.buttonPending=!0,this.$formB({ppi:this.selected,wpi:W()(this.selectedBag.wpi)}).then(function(t){e.bresponse=t,e.tabIndex=1}).finally(function(){e.buttonPending=!1})},closeBag:function(){var e=this;this.buttonPending=!0,this.selectedBag.batch?this.$formBagByPacklist({ppi:this.selected,packList:this.selectedBag.batch.map(function(e){return e.packetListNo}),weight:this.weight,sendmeth:this.sendmeth,plomba:this.plomba,bagType:this.bagType,taraType:this.taraType,comment:this.comment}).then(function(){e.tabIndex=2,e.weight=null,e.plomba=null,e.crateId=null,e.config.isAutoPrint&&e.print()}).finally(function(){e.buttonPending=!1}):this.$formBag({ppi:this.selected,wpi:W()(this.selectedBag.wpi),weight:this.weight,sendmeth:this.sendmeth,plomba:this.plomba,bagType:this.bagType,taraType:this.taraType,comment:this.comment}).then(function(){e.tabIndex=2,e.weight=null,e.plomba=null,e.crateId=null,e.config.isAutoPrint&&e.print()}).finally(function(){e.buttonPending=!1})},mapSpr:function(e,t){if(e)return t[e]},crateEnter:function(e){this.crateId=e,this.taraType=2},manualWpi:function(e){this.$forcePutToBag({barcode:e})},weightEnter:function(e){e&&13==e.length?isNaN(e)?this.$forcePutToBag({barcode:e}):this.plomba=e:1==this.tabIndex&&e.indexOf(".")>=0&&(isNaN(e)||(this.weight=e))},removeB:function(){this.$removeB({b:this.batch.i}),this.$bvModal.hide("mclosebagwpi")},removeWpi:function(e){this.$removeWpi({barcode:e})},next:function(e){e==this.selected&&this.selectedBag.ppi?0==this.tabIndex?this.tabIndex=1:1==this.tabIndex&&this.formBag():this.clear()},save:function(){if(console.log("===>",this.selectedBag.ppi,this.tempPpi),this.tempPpi&&this.selected!=this.tempPpi){var e=this.cursor;this.clear(),this.bags[e].ppi=this.tempPpi,this.tempPpi=null}else this.clear();this.$save()},clear:function(){this.$deselectBag(),this.plomba=null,this.weight=null,this.crateId=null,this.taraType=1,this.$clearCloseResponse(),this.$emit("close")},print:function(){if(this.config.isPrintProxy){var e=document.getElementById("printSection").innerText;e=(e=me()().transform(e)).replace("қ","k"),I.printbag(e)}else this.$print()},testLed:function(e){I.test(e)},printTest:function(){I.printbagTest(),this.clear()}}),components:{Yarlik:_e}};var ke=function(e){n("1E5t")},we=Object(L.a)(xe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{ref:"closeModalWpiRef",attrs:{id:"mclosebagwpi",size:"sm",centered:"centered","hide-footer":"hide-footer","no-fade":"no-fade"},on:{hide:function(t){e.batch=null}}},[e.batch?n("template",{slot:"modal-title"},[n("b-btn",{staticClass:"mr-1",attrs:{variant:"danger"},on:{click:e.removeB}},[n("i",{staticClass:"fa fa-trash"})]),e._v(e._s(e.batch.packetListNo))],1):e._e(),e.batch?n("b-list-group",[n("b-list-group-item",[e._v("Кол-во "+e._s(e.batch.count))]),n("b-list-group-item",[e._v("От "+e._s(e.batch.fromTechindex)+" "+e._s(e.batch.fromDepartment))]),n("b-list-group-item",[e._v("Куда "+e._s(e.batch.toTechindex)+" "+e._s(e.batch.toDepartment))]),n("b-list-group-item",[e._v("Вес "+e._s(e._f("kg")(e.batch.actualWeight))+" кг.")])],1):e._e()],2),n("b-modal",{ref:"closeModalRef",attrs:{id:"mclosebag",size:"",scrollable:"scrollable",centered:"centered","Zhide-header":"Zhide-header","no-close-on-backdrop":"no-close-on-backdrop","no-fade":"no-fade",visible:"visible","header-bg-variant":e.isEditing?"danger":"","footer-bg-variant":e.isEditing?"danger":"","modal-class":{rotate:e.config.isRotate}},on:{hide:e.clear}},[n("template",{slot:"modal-header"},[n("b-card",{staticClass:"w-100",attrs:{"no-body":"no-body"}},[n("b-card-header",{staticClass:"noborder"},[n("b-link",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}},[e._v("×")]),n("b-card-title",[n("i",{staticClass:"fa fa-inbox mr-2",class:{"text-danger":e.isEditing},on:{click:function(t){e.isEditing=!e.isEditing}}}),n("input",{staticClass:"inline",staticStyle:{width:"95px"},attrs:{disabled:!e.isEditing,size:"8"},domProps:{value:e.selectedBag.ppi},on:{input:function(t){e.tempPpi=t.target.value}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedBag.ppn,expression:"selectedBag.ppn"}],staticClass:"inline ml-1",attrs:{size:"17",placeholder:"Полка",disabled:!e.isEditing},domProps:{value:e.selectedBag.ppn},on:{input:function(t){t.target.composing||e.$set(e.selectedBag,"ppn",t.target.value)}}}),e.isEditing?n("div",[n("i",{staticClass:"fa fa-lightbulb-o mr-2"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedBag.led,expression:"selectedBag.led"}],staticClass:"inline",staticStyle:{width:"33px"},attrs:{placeholder:e.cursor},domProps:{value:e.selectedBag.led},on:{input:function(t){t.target.composing||e.$set(e.selectedBag,"led",t.target.value)}}})]):e._e()])],1),n("b-card-header",{staticClass:"pt-0",attrs:{"header-tag":"nav"}},[n("b-nav",{staticClass:"nav-justified wizard",attrs:{"card-header":"card-header",tabs:"tabs"}},[n("b-nav-item",{attrs:{active:0==e.tabIndex},on:{click:function(t){e.tabIndex=0}}},[e._v("ШПИ"),e.count?n("b-badge",{staticClass:"ml-2",attrs:{variant:"primary"}},[e._v(e._s(e.count)+" шт")]):e._e()],1),n("b-nav-item",{attrs:{active:1==e.tabIndex,disabled:!e.count&&!e.batchCount},on:{click:function(t){e.tabIndex=1}}},[e._v("Б'шки"),e.batchCount?n("b-badge",{staticClass:"ml-2",attrs:{variant:"warning"}},[e._v(e._s(e.batchCount))]):e._e()],1),n("b-nav-item",{attrs:{active:2==e.tabIndex,disabled:!e.response&&!e.selectedBag.closeResponse},on:{click:function(t){e.tabIndex=2}}},[e._v("Ярлык")])],1)],1)],1)],1),e.isEditing?e._e():n("b-card",{staticStyle:{"min-height":"500px"},attrs:{"no-body":"no-body"}},[n("b-card-body",[n("b-alert",{staticClass:"mb-5",attrs:{variant:"danger",show:!!e.error,dismissible:"dismissible"}},[e._v(e._s(e.error))]),e.response||2!=e.tabIndex?e._e():[e.selectedBag.closeResponse?n("b-btn",{attrs:{block:"block",variant:"outline-secondary"},on:{click:function(t){e.$store.state.polka.closeResponse=e.selectedBag.closeResponse}}},[e._v("Показать старый ярлык")]):e._e()],e.response&&e.response.labelListNo&&2==e.tabIndex?[n("Yarlik",{attrs:{response:e.response}})]:e._e(),0==e.tabIndex?[n("b-list-group",{staticClass:"noborder",staticStyle:{"min-height":"200px"},attrs:{flush:"flush"}},e._l(e.selectedBag.wpi,function(t,o,a){return n("b-list-group-item",{key:o,staticClass:"flex-column align-items-start",attrs:{variant:t.forcepush?"warning":""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center",on:{click:function(t){e.removeWpi(o)}}},[n("div",[e._v(e._s(e.count-a)),n("i",{staticClass:"fa mx-2",class:{"fa-envelope-open text-danger":t.forcepush,"fa-envelope":!t.forcepush}}),n("b",[e._v(e._s(o))])]),n("div",[t.forcepush?n("b-badge",{staticClass:"mr-1",attrs:{variant:"danger"}},[e._v("Ручной ввод")]):e._e(),t.typeName?n("b-badge",[e._v(e._s(t.typeName))]):e._e(),n("span",{staticClass:"ml-2 text-muted"},[e._v("×")])],1)])])}))]:e._e(),1==e.tabIndex?[n("b-list-group",{staticClass:"noborder",staticStyle:{"min-height":"100px"},attrs:{flush:"flush"}},e._l(e.selectedBag.batch,function(t,o){return n("b-list-group-item",{key:o,staticClass:"flex-column align-items-start",attrs:{variant:t.forcepush?"warning":""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center",on:{click:function(n){e.showBatchContent(t,o)}}},[n("div",[e._v(e._s(e.batchCount-o)),n("i",{staticClass:"fa fa-archive mx-2 text-muted"}),n("b",[e._v(e._s(t.packetListNo))]),n("b-badge",{staticClass:"ml-2",attrs:{variant:"warning"}},[e._v(e._s(t.count)+"шт ")])],1),n("div",[n("b-badge",{attrs:{variant:"warning"}},[e._v(e._s(e._f("kg")(t.totalWeight))+"кг")]),n("span",{staticClass:"ml-2 text-muted"},[e._v("×")])],1)])])}))]:e._e()],2)],1),n("template",{slot:"modal-footer"},[n("b-card",{staticClass:"w-100",attrs:{"no-body":"no-body"}},[0==e.tabIndex?[n("b-card-footer",[n("i",{staticClass:"fa fa-barcode mr-2"}),n("input",{staticClass:"inline pl-2 nokeyboard",staticStyle:{width:"400px","text-transform":"uppercase"},attrs:{placeholder:"Ручной ввод нечитаемых ШПИ"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.manualWpi(t.target.value),t.target.value=""}}})]),n("b-card-footer",[n("i",{staticClass:"fa fa-tachometer mr-2"}),n("input",{staticClass:"inline mr-2 nokeyboard",class:{"text-danger":e.weightTotal>=15e3},staticStyle:{width:"335px","text-align":"right"},attrs:{id:"weightscales",readonly:"",placeholder:"Вес"},domProps:{value:(e.weightTotal/1e3).toFixed(3)}}),e._v("kg")])]:e._e(),1==e.tabIndex?[n("b-card-footer",[n("b-row",[n("b-col",[n("i",{staticClass:"fa fa-tachometer mr-2"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.weight,expression:"weight"}],staticClass:"inline mr-2 nokeyboard",class:{"text-danger":e.weight>=15},staticStyle:{width:"135px","text-align":"right"},attrs:{id:"weightscales",placeholder:"Вес"},domProps:{value:e.weight},on:{dblclick:function(t){e.demo&&(e.weight=5.05)},input:function(t){t.target.composing||(e.weight=t.target.value)}}}),e._v("kg")]),n("b-col",[n("i",{staticClass:"fa fa-bookmark mr-2"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.plomba,expression:"plomba"}],staticClass:"inline nokeyboard",staticStyle:{width:"165px","text-align":"right"},attrs:{placeholder:"Пломба"},domProps:{value:e.plomba},on:{dblclick:function(t){e.demo&&(e.plomba=1234567890123)},input:function(t){t.target.composing||(e.plomba=t.target.value)}}})])],1)],1),n("b-card-footer",[n("b-row",[n("b-col",[n("b-form-radio-group",{attrs:{options:e.sendmethTypes},model:{value:e.sendmeth,callback:function(t){e.sendmeth=t},expression:"sendmeth"}})],1),n("b-col",[n("b-form-radio-group",{model:{value:e.taraType,callback:function(t){e.taraType=t},expression:"taraType"}},[n("b-form-radio",{attrs:{value:"1"}},[e._v("Мешок")]),n("b-form-radio",{attrs:{value:"2"}},[e._v("Ящик")])],1)],1)],1)],1)]:e._e(),n("b-card-footer",[e.isEditing?n("b-btn",{attrs:{block:"block",size:"lg",variant:"danger"},on:{click:e.save}},[e._v("Сохранить")]):e._e(),n("b-alert",{attrs:{variant:"danger",show:e.disabledB&&1==e.tabIndex&&!e.buttonPending,dismissible:"dismissible"}},[n("i",{staticClass:"fa fa-exclamation-triangle mr-3"}),e._v("Для закрытия мешка необходимо "),n("div",{staticClass:"pl-4 ml-2"},[e._v("взвесить и просканировать пломбу!  ")])]),e.isEditing||0!=e.tabIndex?e._e():n("b-btn",{staticClass:"button-block w-100",attrs:{split:"split",size:"lg",disabled:e.disabledP,"split-variant":e.disabledP?"outline-primary":"primary",variant:e.disabledP?"outline-primary":"primary"},on:{click:e.formB}},[e._v("Формировать B накладную")]),e.isEditing||1!=e.tabIndex?e._e():n("b-dropdown",{staticClass:"button-block w-100",attrs:{disabled:e.disabledB,split:"split",size:"lg","split-variant":e.weight>0&&e.weight<15&&e.plomba?e.batchCount?"warning":"primary":e.selectedBag.batch?"outline-warning":"outline-primary",variant:e.batchCount?"outline-warning":"outline-primary"},on:{click:e.closeBag}},[n("template",{slot:"button-content"},[e._v(" Закрыть "+e._s(e.bagTypes[e.bagType].text)+" "+e._s(e.taraTypes[e.taraType])+" "+e._s(e.crateId))]),e._l(e.bagTypes,function(t,o){return n("b-dropdown-item",{key:o,on:{click:function(t){e.bagType=o}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.bagType==o,"fa-circle-o":e.bagType!=o},attrs:{title:o}}),e._v(e._s(t.val))])}),n("b-dropdown-divider"),n("b-dropdown-item",[e._v("Мешок")]),n("b-dropdown-item",[e._v("Ящик")]),n("b-dropdown-divider"),n("b-dropdown-item",[e._v("Наземный")]),n("b-dropdown-item",[e._v("Авиа")])],2),2==e.tabIndex?n("b-dropdown",{staticClass:"button-block w-100",attrs:{split:"split",size:"lg","split-variant":"success",variant:"outline-success"},on:{click:e.print}},[n("template",{slot:"button-content"},[n("i",{staticClass:"fa fa-print mr-2"}),e._v("Печать Ярлыка")]),n("b-dropdown-item",{on:{click:function(t){e.config.isAutoPrint=!e.config.isAutoPrint,e.$save()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.config.isAutoPrint,"fa-circle-o":!e.config.isAutoPrint}}),e._v("Автопечать")]),n("b-dropdown-item",{on:{click:function(t){e.config.isWindowsPrint=!e.config.isWindowsPrint,e.$save()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":!e.config.isWindowsPrint,"fa-circle-o":e.config.isWindowsPrint}}),e._v("Нативная Печать")]),n("b-dropdown-item",{on:{click:function(t){e.config.isPrintProxy=!e.config.isPrintProxy,e.$save()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.config.isPrintProxy,"fa-circle-o":!e.config.isPrintProxy}}),e._v("Proxy Печать")]),n("b-dropdown-item",{on:{click:function(t){e.config.isRotate=!e.config.isRotate,e.$save()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.config.isRotate,"fa-circle-o":!e.config.isRotate}}),e._v("Альбомная")])],2):e._e()],1)],2)],1)],2)],1)},[],!1,ke,null,null).exports,Ce=(new p.a,{name:"CloseModalAvar",props:["isCloseModalAvarOpen"],computed:d()({},Object(g.c)({response:"getCloseResponse",selected:"getSelected",config:"getConfig",error:"getCloseError",selectedBag:"getSelectedBag",bags:"getBags",cursor:"cursor"}),{count:function(){return W()(this.selectedBag.wpi).length}}),data:function(){return{isEditing:!1}},methods:d()({},Object(g.b)(["$closeBag","$clear","$deselectBag","$save","$selectBag","$deselectBag"]),{clearBag:function(){i.default.set(this.selectedBag,"wpi",{}),this.$save(),this.clear()},removeWpi:function(e){console.log("deleted",e,this.selectedBag.wpi[e]),confirm("Вы уверены что хотите удалить "+e)&&(i.default.delete(this.selectedBag.wpi,e),this.$forceUpdate())},clear:function(){this.$deselectBag(),this.$emit("close")}})});var Be=function(e){n("YSt1")},$e=Object(L.a)(Ce,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"closeModalAvarRef",attrs:{id:"mclosebag",size:"",scrollable:"scrollable",centered:"centered","no-close-on-backdrop":"no-close-on-backdrop","no-fade":"no-fade",visible:"visible"},on:{hide:e.clear}},[n("template",{slot:"modal-header"},[n("b-card",{staticClass:"w-100",attrs:{"no-body":"no-body"}},[n("b-card-header",[n("b-link",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}},[e._v("×")]),n("b-card-title",[n("i",{staticClass:"fa fa-inbox mr-2",class:{"text-success":e.isEditing},on:{click:function(t){e.isEditing=!e.isEditing}}}),e.count?n("b-badge",{staticClass:"circle",attrs:{pill:"pill",variant:"success"}},[e._v(e._s(e.count))]):e._e(),e._v("Аварийный ящик")],1)],1)],1)],1),n("b-card",{attrs:{"no-body":"no-body"}},[e.count&&!e.response?n("b-list-group",{staticStyle:{"min-height":"300px"},attrs:{flush:"flush"}},e._l(e.selectedBag.wpi,function(t,o,a){return n("b-list-group-item",{key:o,staticClass:"flex-column align-items-start"},[n("h5",{staticClass:"mb-0",on:{click:function(t){e.removeWpi(o)}}},[e._v(e._s(o)+"   ×")]),t&&t.postIndex?n("small",[e._v(e._s(t.postIndex))]):n("small",{staticClass:"text-muted"},[e._v(e._s(t))])])})):e._e()],1),n("template",{slot:"modal-footer"},[n("b-btn",{attrs:{variant:"danger",block:"block",size:"lg"},on:{click:e.clearBag}},[n("i",{staticClass:"fa fa-lock mr-2"}),e._v("Очистить")])],1)],2)},[],!1,Be,null,null).exports,Re={name:"Console2",mounted:function(){this.$bus.$on("keyboard:keydown:enter:13",this.putToBag),this.$bus.$on("keyboard:keydown:enter:p",this.selectBagBarcode)},beforeDestroy:function(){this.$bus.$off("keyboard:keydown:enter:13",this.putToBag),this.$bus.$off("keyboard:keydown:enter:p",this.selectBagBarcode)},created:function(){this.ledOn&&I.xoff()},watch:{thor:function(e){void 0!==e&&(this.tabIndex=e)},calibrating:function(e){e?this.calibrateStart():this.calibrateStop()}},data:function(){return{tabIndex:0,ledOffline:[!0,!1,!1,!1],tmResponse:null,isCloseModalOpen:!1,isCloseModalAvarOpen:!1,bind:{started:!1,cursor:null,selectedBag:null,unmappedIndx:null,unmapped:[],intrvl:null}}},computed:d()({},Object(g.c)({bags:"getBags",selectedBag:"getSelectedBag",calibrating:"getCalibrating",ledOn:"getLedOn",thor:"thor",cursor:"cursor",consoles:"getConsoles"}),{filteredBags:function(){var e=this;return function(t){return e.bags.slice(24*t,24*(t+1))}},bagsPages:function(){return new Array(Math.ceil(this.bags.length/24))}}),mixins:[ge],methods:d()({},Object(g.b)(["$initBags","$putToBag","$selectBag","$deselectBag","$fetchSortplan","$remapPpi","$clear","$clearSelected","$save"]),{kolor:Y,timeout:function(e){window.clearTimeout(this.tmResponse),this.tmResponse=window.setTimeout(this.$clear,e)},selectBagBarcode:function(e){this.calibrating?this.calibrateMapBagBarcode(e):this.selectBag(e)},calibrateSelectBag:function(e,t,n){this.calibrating&&(this.$selectBag({ppi:e}),console.log("calibrating selectBag",e),this.calibrateMap(24*n+t))},selectBag:function(e,t,n,o){var a=this;console.debug("selectBag",e,t,n,o),window.clearTimeout(this.tmResponse),this.isCloseModalOpen||this.calibrating||(this.$clear(),this.$selectBag({ppi:e}).then(function(){o?a.isCloseModalAvarOpen=!0:a.isCloseModalOpen=!0}).catch(function(e){console.log("selectBag error",e)}))},putToBag:function(e,t){this.isCloseModalOpen?console.debug("skipping putToBag due to isCloseModalOpen"):(console.log("started putToBag barcode",e),window.clearTimeout(this.tmResponse),this.$putToBag({barcode:e,color:t}).then(function(e){console.debug("ended Положили в корзину",e.parentPostIndex)}).catch(function(e){console.error("putToBag error",e)}))},clearAll:function(){this.$clear(),this.ledOn&&I.xoff()}}),components:{CloseModal:we,CloseModalAvar:$e,Var:{render:function(){return this.$scopedSlots.default(this.$attrs)}}}};var Oe=function(e){n("DaNL")},Se=Object(L.a)(Re,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"flex-xl-nowrap2"},[n("div",{staticClass:"pt-2 mt-4 bd-content col-12"},[n("b-tabs",{staticClass:"nav-justified wizard",attrs:{pills:"pills"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},e._l(e.bagsPages,function(t,o){return n("b-tab",{key:o},[n("template",{slot:"title"},[e._v("Thor "+e._s(o+1)+" ["+e._s(24*o)+"-"+e._s(24*(o+1))+"] "),e.ledOffline[o]?n("i",{staticClass:"fa fa-lightbulb-o text-danger pull-right"}):e._e()]),n("b-card-group",{staticClass:"polkas pt-4",class:{calibrating:e.calibrating},attrs:{deck:"deck"}},e._l(e.filteredBags(o),function(t,a){return n("b-card",{key:a,class:{"text-muted":!Object.keys(t.wpi)[0],outlined:e.bind.cursor==t.led||null==t.led||e.cursor==a,isErrorBag:t.isErrorBag,inserted:t.color&&Object.keys(t.color).length},attrs:{"no-body":"no-body",align:"center",disabled:e.calibrating&&null!=t.led,"bg-variant":t.color?Object.values(t.color)[0]:""},on:{click:function(n){e.selectBag(t.ppi,a,o,t.isErrorBag)},dblclick:function(n){e.calibrateSelectBag(t.ppi,a,o)}}},[n("b-card-header",[t.isErrorBag?[e._v("Корзина")]:[e._v(e._s(t.ppi))],n("small",{staticClass:"text-muted indx"},[n("span",{staticClass:"led",class:{remapped:null!=t.led}},[e._v(e._s(null!==t.led?t.led:a))])])],2),n("b-card-body",[n("h4",{staticClass:"card-title",class:{smaller:Object.keys(t.wpi).length>100}},[null!=e.bind.cursor?[e._v(e._s(e.bind.cursor)+" ")]:[e._v(e._s(Object.keys(t.wpi).length))]],2)]),e._l(t.color,function(e,t){return n("b-card-footer",{key:t,staticClass:"pt-0 pb-2",attrs:{"footer-bg-variant":e}})})],2)}))],2)}))],1),n("div",{staticClass:"p-4 pb-5 consoles fixed-bottom"},[n("b-card-group",{attrs:{deck:"deck"}},e._l(e.consoles,function(t,o,a){return n("b-card",{key:o,staticClass:"mr-1",class:{shake:t.req&&t.req.error},attrs:{"no-body":"no-body"}},[n("b-card-header",{staticClass:"pt-1 pb-0",attrs:{"header-bg-variant":t.bgColor}}),n("b-card-header",{attrs:{"header-bg-variant":t.req?t.bgColor:"","header-text-variant":"white"}},[e._v("ШПИ "),t.req?[n("b",[e._v(e._s(t.req.barcode)+" ")]),n("b-btn",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.clearAll(t)}}},[e._v(" ×")])]:e._e()],2),n("b-card-body",{staticClass:"p-3",attrs:{"body-bg-variant":t.req&&t.req.error?"danger":"","body-text-variant":t.req&&t.req.error?"white":""}},[t.req?["search"==t.req.status?n("b-progress",{attrs:{variant:t.bgColor,value:100,max:100,striped:"striped",animated:"animated"}}):e._e(),t.req.error?[n("p",{domProps:{innerHTML:e._s(t.req.error)}})]:e._e(),t.req.response&&t.req.response.mailInfo?[n("div",{attrs:{set:e.r=t.req.response}}),n("h4",{staticClass:"card-title"},[e._v("Корзина "+e._s(e.r.parentPostIndex)),e.selectedBag&&e.selectedBag.ppn?n("span",[e._v("( "+e._s(e.selectedBag.ppn)+" )")]):e._e()]),e._v("АДРЕС : "),n("b",[e._v(e._s(t.req.response.postIndexTitle)+" ")]),e._v("ИНДЕКС : "),n("b",[e._v(e._s(t.req.response.postIndex))]),n("span",{staticClass:"text-muted ml-5"}),e._v(e._s(t.req.response.mailInfo.toFullName))]:e._e()]:e._e()],2)],1)}))],1),e.isCloseModalOpen?n("CloseModal",{on:{close:function(t){e.isCloseModalOpen=!1}}}):e._e(),e.isCloseModalAvarOpen?n("CloseModalAvar",{on:{close:function(t){e.isCloseModalAvarOpen=!1}}}):e._e()],1)},[],!1,Oe,"data-v-064b758e",null).exports,Pe=new p.a,Ne={name:"Users",data:function(){return{deviceip:null,apiUrl:null}},computed:d()({},Object(g.c)({settings:"getSettingsSelected"})),methods:d()({},Object(g.b)(["settingsUpdate"]),{saveSettings:function(){console.log("settgins updated"),this.settingsUpdate(this.settings)},encode:function(e){return Pe.encode(e)}})};var Te=function(e){n("IspN")},Ee=Object(L.a)(Ne,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"no-body":"no-body"}},[n("b-tabs",{attrs:{pills:"pills",card:"card",vertical:"vertical"}},[n("b-tab",{attrs:{title:"Описание",active:"active"}},[n("p",[e._v("Аппаратоно технлогический комплекс Умные полки создан для оптимизации сортировки почтовых писем и отпарвлений ")]),n("h5",[e._v("Что нужно перед началом")]),n("p",[e._v("В компрелкт полки идет "),n("ul",[n("li",[e._v("24 LED индиккатора")]),n("li",[e._v("Модуль управления, блокпитание")]),n("li",[e._v("USB хаб для подключения туда весов и принтера")]),n("li",[e._v("Thor")]),n("li",[e._v("Весы")]),n("li",[e._v("Принтер")])])])]),n("b-tab",{attrs:{title:"Подключение"}},[n("p",[e._v("Необходимо все подключить по следующей схеме")])]),n("b-tab",{attrs:{title:"Подготовка и Тестирование"}},[n("p",[e._v("Штрихкода для пользователей должны начинатся с "),n("b",[e._v("u")]),e._v(" и далее логин например "),n("b",[e._v("utest")]),e._v(" и далее нужно передать Enter")]),n("p",[e._v("Штрихкода для полок должны начинатся с "),n("b",[e._v("p")]),e._v(" и далее номер/индекс полки например "),n("b",[e._v("p505000")]),e._v(" или "),n("b",[e._v("p#1")]),e._v(" и далее нужно передать Enter")]),n("p",[e._v("Штрихкода посылок должны иметь 13значенное число например "),n("b",[e._v("KZ123456789EZ")])])]),n("b-tab",{attrs:{title:"Настройка ПО"}},[n("h5",[e._v("Установка ПО и Настройка")]),n("p",[e._v("Заходите на сайт, устанавливаете технологический индекс, подгружаете сортплан, ")]),n("h5",[e._v("Процесс Сортировки")]),n("p",[e._v("Авторизируйтесь бейджиком под своим логином в ПУС, и далее начинаете сканировать РПО,")]),n("h5",[e._v("Edge-case")]),n("p",[e._v("Если РПО ненайдено, либо индекс ненайден в сортплане, если произошла актовка, необходимо все кинуть в отстойник")])]),n("b-tab",{attrs:{title:"Настройка оборудования"}},[n("h5",[e._v("Thor")]),n("p",[e._v("Установить ярлык на pls.post.kz/polki/")]),n("p",[e._v("Отредактивароть CORS в Браузере")]),n("p",[e._v("Настроено 2 айпиадреса")]),n("p",[e._v("Экран необходимо откалибровать для корректной работы")]),n("h5",[e._v("Штрихкод сканер")]),n("p",[e._v("У штрихкод сканера должна быть выставлен режим переноса строки ( Enter ) после каждого сканирования")]),n("h5",[e._v("Весы")]),n("p",[e._v("Весы должны поддерживать ввод с клавиатуры")]),n("h5",[e._v("Принтер")]),n("p",[e._v("Принтер ярлыков должен поддерживать EPL скриптовый язык, Утилита для настройки принтера "),n("a",{attrs:{href:"https://support.honeywellaidc.com/servlet/fileField?entityId=ka02K000000DjwLQAS&amp;field=File_1__Body__s"}},[e._v("скачать, В притере выставить режим Generic/Text")])]),n("h5",[e._v("WiFI сеть")]),n("p",[e._v("Сеть желательно должна называться sortrack ее можно создать на Thorе")]),n("h5",[e._v("Доступ к серверу ПУС")]),n("p",[e._v("Сеть желательно должна называться sortrack ее можно создать на Thorе")]),n("h5",[e._v("Модуль")]),n("p",[e._v("Прошивку можно "),n("a",{attrs:{href:"static/firware/sortrack.fmw"}},[e._v("скачать тут ")])]),n("h5",[e._v("Сканер штрихкода")]),n("p",[e._v("Настройка мультиюзера "),n("a",{attrs:{href:"static/docs/symbol2207_multiuser.pdf"}},[e._v("скачать тут ")])])])],1)],1)},[],!1,Te,"data-v-75e73560",null).exports,Me=new p.a,Ie={name:"DemoPrintModal",computed:d()({},Object(g.c)({depcode:"getDepcode",config:"config",demoBarcodes:"getDemoBarcodes"})),created:function(){this.$fetchDemoRPO()},data:function(){return{depcodeManual:null,status:null,error:null,techIndexes:["055990","220081"],crates:["220081.001","220081.002"]}},methods:d()({},Object(g.b)(["$fetchDemoRPO"]),{encode:function(e){return Me.encode(e)}})};var De=function(e){n("YKOQ"),n("4Zh4")},Ke=Object(L.a)(Ie,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demoprint px-4",attrs:{id:"printSection"}},[n("h5",[e._v("Пользователи")]),n("b-card-group",{staticClass:"users",attrs:{deck:"deck"}},e._l(e.config.users,function(t){return n("b-card",{key:t,attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b",[e._v(e._s(t))])]),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode("u"+t)))])],2)})),n("h5",{staticClass:"mt-3"},[e._v("Тестовые Ящики")]),n("b-card-group",{staticClass:"crates",attrs:{deck:"deck"}},e._l(e.crates,function(t){return n("b-card",{key:t,attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b",[e._v(e._s(t))])]),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode("c"+t)))])],2)})),n("h5",{staticClass:"mt-3"},[e._v("Технологические индекс")]),n("b-card-group",{staticClass:"techindexes",attrs:{deck:"deck"}},e._l(e.techIndexes,function(t){return n("b-card",{key:t,attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b",[e._v(e._s(t))])]),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode("t"+t)))])],2)})),n("h5",{staticClass:"mt-3"},[e._v("Тестовые РПО")]),n("b-card-group",{staticClass:"rpos",attrs:{deck:"deck"}},e._l(e.demoBarcodes,function(t){return n("b-card",{key:t,attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b",[e._v(e._s(t))])]),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode(t)))])],2)})),n("h5",{staticClass:"mt-3"},[e._v("Полки")]),n("b-card-group",{staticClass:"polka",attrs:{deck:"deck"}},e._l(24,function(t){return n("b-card",{key:t,attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b",[e._v(e._s("#"+t))])]),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode("p#"+(t-1))))])],2)}))],1)},[],!1,De,null,null).exports;var Le=function(e){n("2KQ+")},Ze=Object(L.a)({name:"AboutModal",data:function(){return{}}},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center"},[n("h5",{staticClass:"mt-4"},[e._v("Credits")]),n("p",[e._v("Джунусов Тимур")]),n("p",[e._v("Азамат Алимбаев")]),n("p",[e._v("Алишер Когабаев")]),n("p",[e._v("Габиден Шамшимов")]),n("p",[e._v("Нагым Аманкулов")]),n("p",[e._v("Tun Lin Fao")]),n("p",[e._v("Lim Min Ho")]),n("h5",{staticClass:"mt-4"},[e._v("АО Казпочта")]),n("p",[e._v("Зарина Садыкова")]),n("p",[e._v("Айгерим Ессенова")]),n("p",[e._v("Бекмурат Абсадыков")]),n("p",[e._v("Улан Копенов")]),n("p",[e._v("Азамат Оралов")]),n("p",[e._v("и многие другие")]),n("h5",{staticClass:"mt-4"},[e._v("Большое спасибо")]),n("p",[e._v("Нариман,Сауле,Сакен!")]),n("h5",{staticClass:"mt-4"},[e._v("Обратная связь")]),n("p",[e._v("ПО всем вопросам обращайтесь help@sortrack.com")]),n("h5",{staticClass:"mt-4"},[e._v("Goodies")]),n("b-link",{attrs:{to:"static/wallpapers/sortrack.png",target:"_blank"}},[e._v("Скачать обои на рабочикй стол")])],1)},[],!1,Le,"data-v-f3e166cc",null).exports,ze=new p.a,je={name:"Badges",data:function(){return{deviceip:null,apiUrl:null}},computed:d()({},Object(g.c)({settings:"getSettingsSelected"})),methods:{encode:function(e){return ze.encode(e)}}};var Ae=function(e){n("G8D9"),n("wn/K")},We=Object(L.a)(je,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 badges"},[n("b-card-group",{attrs:{id:"printSection",deck:"deck"}},e._l(e.settings.users,function(t,o){return n("b-card",{key:o,staticClass:"mb-2",attrs:{align:"center","no-body":"no-body"}},[n("template",{slot:"header"},[n("b-form-input",{staticClass:"inline",model:{value:e.settings.users[o],callback:function(t){e.$set(e.settings.users,o,t)},expression:"settings.users[i]"}})],1),n("div",{staticClass:"barcode"},[e._v(e._s(e.encode("u"+t)))]),n("b-card-footer",[n("img",{attrs:{src:"static/logo2.svg",width:"200",height:"40"}})])],2)})),n("b-btn",{attrs:{block:"block",variant:"outline-secondary"},on:{click:function(t){e.settings.users.push("")}}},[e._v("Добавить")])],1)])},[],!1,Ae,null,null).exports,Ue={name:"StatsModal",data:function(){return{max:100}},computed:d()({},Object(g.c)({bags:"getBags",lastBag:"getLastBag",user:"getUser"}),{stats:function(){return this.bags.reduce(function(e,t){return t.isErrorBag?e:e+W()(t.wpi).length},0)},errors:function(){return W()(this.lastBag.wpi).length}}),methods:d()({},Object(g.b)(["settingsUpdate"]))};var qe=function(e){n("y5oS")},Fe=Object(L.a)(Ue,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h5",[this._v("Кол-во посылок "+this._s(this.user.name)+" ")]),t("b-card",{attrs:{"no-body":"no-body"}},[t("b-progress",{attrs:{value:this.stats,max:this.max,variant:"success","show-value":"show-value"}}),t("b-progress",{attrs:{value:this.errors,max:this.max,variant:"danger","show-value":"show-value"}})],1)],1)},[],!1,qe,"data-v-6a3e4a7e",null).exports,Ge=null,Ye={name:"DiagnosticModal",data:function(){return{wpi:null,weight:null,testYarlik:{result:"success",labelListNo:"G2020555"+Math.ceil(1e5*Math.random()),actualWeight:1050,workerName:"Сана Сабыргалиева",date:(new Date).toString(),count:50,packetListCount:50,toTechindex:"050009",toDepartment:"Алматы-9",totalWeight:9999,fromTechindex:"055990",techindex:"055990",fromDepartment:"АФ АО «Казпочта» «Алматинский»",route:"Наземный",sendMethod:1,bagType:1,taraType:1,plombaNum:"1234567890123",comment:"DEMO:Диагностика Система Умных Полок"},led:0,testScanerState:null,testWeightState:null}},methods:{testScaner:function(){13==event.keyCode&&""!=this.wpi?this.testScanerState=!0:""!=this.wpi&&(this.testScanerState=!1)},testWeight:function(){13==event.keyCode&&""!=this.weight?this.testWeightState=!0:""!=this.weight&&(this.testWeightState=!1)},testPrint:function(){window.print()},testLedRoll:function(){var e=this;this.testLedOff(),Ge=window.setInterval(function(){I.push(e.led++)},5e3)},testLedError:function(){this.testLedOff(),I.error()},testLedOff:function(){this.led=0,window.clearInterval(Ge),I.$ledoff()}},components:{Yarlik:_e}};var He=function(e){n("VQp2"),n("GoXV")},Ve=Object(L.a)(Ye,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-1"},[n("b-card",{attrs:{"no-body":"no-body"}},[n("b-card-header",[n("b-input-group",[n("b-input-group-prepend",{attrs:{"is-text":"is-text"}},[e._v("Тест")]),n("b-form-input",{staticClass:"nokeyboard",attrs:{id:"input-wpi",placeholder:"Штрихкод Cканера",autofocus:"autofocus",state:e.testScanerState},on:{blur:function(t){e.testScanerState=null},keyup:e.testScaner},model:{value:e.wpi,callback:function(t){e.wpi=t},expression:"wpi"}}),n("b-form-valid-feedback",{attrs:{id:"input-wpi"}},[e._v("Успешно пройден, сканер настроен 😊!")]),n("b-form-invalid-feedback",{attrs:{id:"input-wpi"}},[e._v("У сканера не настроен ENTER")])],1)],1),n("b-card-footer",[n("b-input-group",[n("b-input-group-prepend",{attrs:{"is-text":"is-text"}},[e._v("Тест")]),n("b-form-input",{staticClass:"nokeyboard",attrs:{id:"input-weight",placeholder:"Электронных Весов",state:e.testWeightState},on:{blur:function(t){e.testWeightState=null},keyup:e.testWeight},model:{value:e.weight,callback:function(t){e.weight=t},expression:"weight"}}),n("b-form-valid-feedback",{attrs:{id:"input-weight"}},[e._v("Успешно пройден, Весы настроены 😊!")]),n("b-form-invalid-feedback",{attrs:{id:"input-weight"}},[e._v("У Весов не настроен ENTER")])],1)],1)],1),n("b-card",{staticClass:"mt-2",attrs:{"no-body":"no-body"}},[n("b-card-body",[n("Yarlik",{attrs:{response:e.testYarlik}})],1),n("b-card-footer",{staticClass:"text-center"},[n("b-btn",{attrs:{variant:"outline-primary"},on:{click:e.testPrint}},[e._v("Тестовая Печать")])],1)],1),n("b-card",{staticClass:"mt-2",attrs:{"no-body":"no-body"}},[n("b-card-body",[n("b-input-group",[n("b-input-group-prepend",{attrs:{"is-text":"is-text"}},[e._v("Тест LED ламп")]),n("b-input-group-append",[n("b-btn",{attrs:{variant:"success"},on:{click:e.testLedRoll}},[e._v("Поочереди")])],1),n("b-input-group-append",[n("b-btn",{attrs:{variant:"danger"},on:{click:e.testLedError}},[e._v("Все")])],1),n("b-input-group-append",[n("b-btn",{attrs:{variant:"secondary"},on:{click:e.testLedOff}},[e._v("Выключить")])],1)],1)],1)],1)],1)},[],!1,He,null,null).exports,Qe={name:"MultiLedModal",data:function(){return{test:null}},computed:d()({},Object(g.c)({settings:"getSettingsSelected",ledOn:"getLedOn",demo:"getDemo"})),methods:d()({},Object(g.b)(["$save","$initBags","$initSettings","$togleDemo","$togleLed"]),{togleDemo:function(e){var t=this;console.log("togleDemo",e),this.$togleDemo({val:e}).then(function(){t.demo||mock.restore()})},togleLed:function(e){this.$togleLed({val:e}),console.log("togleLed",this.ledOn)},close:function(){this.$root.$emit("bv::hide::modal","settings","")},save:function(){this.$initSettings(),this.$save()}})};var Xe,Je,et=function(e){n("cipd")},tt=Object(L.a)(Qe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"settings",title:"Настройки LED",size:"md",lazy:"lazy","hide-header":"hide-header",centered:"centered","ok-title":"Сохранить"},on:{ok:e.save}},[e.settings?n("b-form",[n("b-card",{attrs:{"no-body":"no-body"}},[n("b-card-header",[n("b-link",{staticClass:"close",on:{click:e.close}},[e._v("×")]),n("b-card-title",[e._v("Настройки")])],1),n("b-tabs",{attrs:{card:"card"}},[n("b-tab",{attrs:{title:"Мультитор",active:"active"}},[n("b-form-group",{attrs:{label:"Кол-во Ячеек",horizontal:"horizontal"}},[n("b-button-group",{attrs:{block:"block"}},[n("b-btn",{attrs:{variant:24==e.settings.size?"primary":""},on:{click:function(t){e.settings.size=24,e.$initBags()}}},[e._v("24")]),n("b-btn",{attrs:{variant:48==e.settings.size?"primary":""},on:{click:function(t){e.settings.size=48,e.$initBags()}}},[e._v("48")]),n("b-btn",{attrs:{variant:72==e.settings.size?"primary":""},on:{click:function(t){e.settings.size=72,e.$initBags()}}},[e._v("72")]),n("b-btn",{attrs:{variant:96==e.settings.size?"primary":""},on:{click:function(t){e.settings.size=96,e.$initBags()}}},[e._v("96")])],1)],1),n("b-form-group",{attrs:{label:"MultiLED IP",horizontal:"horizontal"}},[e._l(e.settings.leds,function(t,o){return[n("b-input-group",{staticClass:"mb-2",attrs:{prepend:""+o}},[n("b-form-input",{model:{value:e.settings.leds[o],callback:function(t){e.$set(e.settings.leds,o,t)},expression:"settings.leds[i]"}})],1)]})],2)],1),n("b-tab",{attrs:{title:"Сервер"}},[n("b-form-group",{attrs:{label:"URL ПУС Сервиса",horizontal:"horizontal"}},[n("b-form-input",{attrs:{readonly:"readonly"},model:{value:e.settings.apiUrl,callback:function(t){e.$set(e.settings,"apiUrl",t)},expression:"settings.apiUrl"}})],1),n("b-form-group",{attrs:{label:"WS Server",horizontal:"horizontal"}},[n("b-input-group",[n("b-form-input",{model:{value:e.settings.broker,callback:function(t){e.$set(e.settings,"broker",t)},expression:"settings.broker"}}),n("b-input-group-append",[n("b-btn",{on:{click:function(e){}}},[e._v("Подключить")])],1)],1)],1)],1),n("b-tab",{attrs:{title:"Принтер"}},[n("b-form-group",{attrs:{label:"IP Printer",horizontal:"horizontal"}},[n("b-form-input",{model:{value:e.settings.printer,callback:function(t){e.$set(e.settings,"printer",t)},expression:"settings.printer"}})],1),n("b-form-group",{attrs:{label:"isWindowsPrint",horizontal:"horizontal"}},[n("b-form-checkbox",{model:{value:e.settings.isWindowsPrint,callback:function(t){e.$set(e.settings,"isWindowsPrint",t)},expression:"settings.isWindowsPrint"}})],1),n("b-form-group",{attrs:{label:"isAutoPrint",horizontal:"horizontal"}},[n("b-form-checkbox",{model:{value:e.settings.isAutoPrint,callback:function(t){e.$set(e.settings,"isAutoPrint",t)},expression:"settings.isAutoPrint"}})],1),n("b-form-group",{attrs:{label:"isPrintProxy",horizontal:"horizontal"}},[n("b-form-checkbox",{model:{value:e.settings.isPrintProxy,callback:function(t){e.$set(e.settings,"isPrintProxy",t)},expression:"settings.isPrintProxy"}})],1)],1),n("b-tab",{attrs:{title:"Tweaks"}},[n("b-card",{attrs:{"bg-variant":"light",title:"Timeouts"}},[n("b-form-group",{attrs:{label:"ШПИ Вложение",horizontal:"horizontal"}},[n("b-form-input",{model:{value:e.settings.bindscan,callback:function(t){e.$set(e.settings,"bindscan",t)},expression:"settings.bindscan"}})],1),n("b-form-group",{attrs:{label:"Bind Scan",horizontal:"horizontal"}},[n("b-form-input",{model:{value:e.settings.bindscan,callback:function(t){e.$set(e.settings,"bindscan",t)},expression:"settings.bindscan"}})],1),n("b-form-group",{attrs:{label:"MockDelayResponse",horizontal:"horizontal"}},[n("b-form-checkbox",{model:{value:e.settings.mockdelay,callback:function(t){e.$set(e.settings,"mockdelay",t)},expression:"settings.mockdelay"}})],1)],1),n("b-card",{attrs:{"bg-variant":"light",title:"Sounds"}},[n("b-form-group",{attrs:{label:"Поиск",horizontal:"horizontal"}},[n("input",{attrs:{type:"range",name:"volume",min:"0",max:"100"}})]),n("b-form-group",{attrs:{label:"ШПИ",horizontal:"horizontal"}},[n("input",{attrs:{type:"range",name:"volume",min:"0",max:"100"}})]),n("b-form-group",{attrs:{label:"Открыть мешок",horizontal:"horizontal"}},[n("input",{attrs:{type:"range",name:"volume",min:"0",max:"100"}})])],1)],1),n("b-tab",[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-bug mr-2"})]),n("b-form-group",{attrs:{label:"NO LED",horizontal:"horizontal"}},[n("b-form-checkbox",{attrs:{checked:!e.ledOn},on:{change:function(t){e.togleLed()}}})],1),n("b-form-group",{attrs:{label:"Demo",horizontal:"horizontal"}},[n("b-form-checkbox",{attrs:{checked:e.demo},on:{change:function(t){e.togleDemo()}}})],1)],2)],1)],1)],1):e._e()],1)},[],!1,et,null,null).exports,nt=new p.a,ot={name:"app",data:function(){return{errorLogin:null,tmpUser:null,tmpDepcode:null,tmResponse:null,isSortplanModalOpen:!1,demoIndex:0,colorPrefix:"R",colorPrefixRandom:!1,showDemo:!1,ws:{isOpen:!1,start:!1,error:null,message:"Here will be data",url:null}}},mounted:function(){this.$bus.$on("keyboard:keydown:enter:t",this.registerDepcode),this.$bus.$on("keyboard:keydown:enter:u",this.loginViaBarcode),this.demoIndex=Number(localStorage.getItem("demoIndex"))},created:function(){var e=this;this.$db.on("populate",function(){le(e.$db)})},beforeDestroy:function(){this.$bus.$off("keyboard:keydown:enter:t",this.registerDepcode),this.$bus.$off("keyboard:keydown:enter:u",this.loginViaBarcode)},computed:d()({},Object(g.c)((Xe={settings:"getSettingsSelected",loginResponse:"getLoginResponse",ledOn:"getLedOn",demo:"getDemo",calibrating:"getCalibrating",bags:"getBags",barcode:"getBarcode",hydrated:"hydrated",response:"getResponse",error:"getError",user:"getUser",depcode:"getDepcode",consoles:"getConsoles"},l()(Xe,"calibrating","getCalibrating"),l()(Xe,"demoBarcodes","getDemoBarcodes"),Xe)),{offline:function(){return this.$root.offline},mqttOnline:function(){return this.$root.mqttOnline}}),watch:{hydrated:function(){this.$onHydrated(),this.togleDemo(this.demo),this.togleLed(this.ledOn)}},methods:d()({},Object(g.b)(["$onHydrated","$login","$logout","$save","$initBags","$fetchDemoRPO","$registerDepcode","$togleDemo","$togleLed","$setColor"]),{kolor:Y,encode:function(e){return nt.encode(e)},enterBarcodeRandom:function(){var e=this;this.demoBarcodes?(this.demoIndex==this.demoBarcodes.length&&(this.demoIndex=0),this.enterBarcodeManualy(this.demoBarcodes[this.demoIndex++]),localStorage.setItem("demoIndex",this.demoIndex)):this.$fetchDemoRPO().then(function(){e.enterBarcodeManualy(e.demoBarcodes[e.demoIndex++])})},enterBarcodeManualy:function(e){if(this.colorPrefixRandom){var t=Math.ceil(10*Math.random());this.colorPrefix=t>3?t>6?"G":"B":"R"}console.log("enterBarcodeManualy",e,this.colorPrefix),this.$bus.$emit("keyboard:keydown:enter:13",e,this.colorPrefix)},setUserColorPrefix:function(e){"random"==e?(this.colorPrefix="R",this.colorPrefixRandom=!0):(this.colorPrefix=e,this.colorPrefixRandom=!1)},registerDepcode:function(e){console.log("registerdepcode",e),this.$registerDepcode({depcode:e})},loginViaBarcode:function(e){this.user&&this.user.login==e?this.$logout():this.login(e)},login:function(e){var t=this;this.tmpUser=e,this.$login({user:e}).then(function(n){console.log("login",e),t.tmpUser=null,t.$root.$emit("bv::hide::modal","user","#btnLogin")}).catch(function(e){t.timeout(3e3),t.$root.$emit("bv::show::modal","user")})},clear:function(){this.$store.state.polka.loginResponse=null},timeout:function(e){window.clearTimeout(this.tmResponse),this.tmResponse=window.setTimeout(this.clear,e)},toggleFullScreen:function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},togleCalibrate:function(e){console.log("togleCalibrate",this.$store.state.polka.calibrating),this.$store.state.polkaUtils.calibrating=!this.$store.state.polkaUtils.calibrating},togleDemo:function(e){var t=this;console.log("togleDemo",e),this.$togleDemo({val:e}).then(function(){t.demo||ie.restore()})},togleLed:function(e){this.$togleLed({val:e}),console.log("togleLed",this.ledOn)},toggleWsConnect:function(){var e=this;this.ws.isOpen?(Je.close(),this.ws.isOpen=!1,Je=null):((Je=new WebSocket("ws://"+this.settings.broker)).addEventListener("open",function(t){e.ws.isOpen=!0,Je.send("/")}),Je.addEventListener("error",function(t){console.error("error",t),e.ws.error=t,e.ws.isOpen=!1}),Je.addEventListener("close",function(t){e.ws.isOpen=!1}),Je.addEventListener("message",function(t){console.log("message",t),e.ws.message=t}))}}),components:{Keyboard:j,SortplanModal:pe,Console:Se,HelpModal:Ee,DemoPrintModal:Ke,AboutModal:Ze,BadgeModal:We,MultiLedModal:tt,StatsModal:Fe,DiagnosticModal:Ve}};var at=function(e){n("Vy1y"),n("Wsz4"),n("3Urz"),n("aITT")},st=Object(L.a)(ot,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hydrated?n("div",{class:{disabled:!e.user&&!e.calibrating,isDemo:e.demo,isLedOff:e.ledOn,notechindex:!e.depcode},attrs:{id:"app",Zclass:"{'bg-danger text-white':error,'bg-success text-white':response}"},on:{paste:function(t){e.enterBarcodeManualy(t.clipboardData.getData("text"))}}},[n("b-navbar",{staticClass:"bd-navbar",attrs:{toggleable:"md",fixed:"top",type:"dark"}},[n("b-nav-toggle",{attrs:{target:"nav_collapse"}}),n("b-navbar-brand",[n("img",{attrs:{src:"static/logo2.svg",width:"200",height:"40"},on:{click:function(t){e.toggleFullScreen()}}}),e.ledOn?e._e():n("b-badge",{attrs:{variant:"danger"},on:{click:function(t){e.togleLed()}}},[e._v("× NO LED")]),e.offline?n("b-badge",{attrs:{variant:"danger"}},[e._v("OFFLINE")]):e._e(),e.demo?n("b-badge",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:function(t){e.togleDemo()}}},[e._v("× DEMO")]):e._e(),e.calibrating?n("b-badge",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:function(t){e.togleCalibrate()}}},[e._v("× CALIBRATE")]):e._e(),e.ws.isOpen?n("b-badge",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:function(t){e.toggleWsConnect()}}},[e._v("WS")]):e._e()],1),e.depcode?n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-navbar-nav",[n("b-nav-item-dropdown",{attrs:{right:"",id:"loginPopover"}},[n("template",{slot:"button-content"},[n("i",{staticClass:"fa fa-map-marker mr-2"}),e._v(e._s(e.depcode))]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.depcode",modifiers:{depcode:!0}}]},[e._v("Сменить Индекс")]),n("b-dropdown-divider"),n("b-dropdown-header",{on:{click:function(t){e.showDemo=!e.showDemo}}},[e._v("Печать")]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.badge",modifiers:{badge:!0}}]},[e._v("Бейджики")]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"msortplan",expression:"'msortplan'"}],on:{click:function(t){e.isSortplanModalOpen=!0}}},[e._v("Сортплан")]),e.showDemo?n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.demoprint",modifiers:{demoprint:!0}}]},[e._v("Demo Шаблон")]):e._e(),n("b-dropdown-divider"),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.diagnostic",modifiers:{diagnostic:!0}}]},[e._v("Диагностика")]),n("b-dropdown-item",{on:{click:function(t){e.togleCalibrate()}}},[e._v("Калибрововка")]),e.showDemo?[n("b-dropdown-divider"),n("b-dropdown-item",{on:{click:function(t){e.togleDemo()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.demo,"fa-circle-o":!e.demo}}),e._v("Демо")]),n("b-dropdown-item",{on:{click:function(t){e.togleLed()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.ledOn,"fa-circle-o":!e.ledOn}}),e._v("Лампочки")]),e.settings.broker?n("b-dropdown-item",{on:{click:function(t){e.toggleWsConnect()}}},[n("i",{staticClass:"fa mr-2",class:{"fa-circle text-success":e.ws.isOpen,"fa-circle-o":!e.ws.isOpen}}),e._v("Мультитор ")]):e._e()]:e._e(),n("b-dropdown-divider"),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.settings",modifiers:{settings:!0}}]},[e._v("Настройки")])],2)],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[n("b-input-group",[n("b-form-input",{staticClass:"nokeyboard",attrs:{disabled:!e.user,placeholder:"Поиск поссылок  ..."},nativeOn:{focus:function(e){e.target.value=""},dblclick:function(t){e.enterBarcodeRandom(),t.target.blur()},keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation(),e.enterBarcodeManualy(t.target.value),t.target.value="",t.target.blur()}}}),n("b-input-group-append",[n("b-dropdown",{attrs:{variant:e.kolor(e.colorPrefix),dropup:e.colorPrefixRandom}},[n("b-dropdown-item",{on:{click:function(t){e.setUserColorPrefix("R")}}},[n("div",{staticClass:"text-danger"},[e._v("Red")])]),n("b-dropdown-item",{on:{click:function(t){e.setUserColorPrefix("G")}}},[n("div",{staticClass:"text-success"},[e._v("Green")])]),n("b-dropdown-item",{on:{click:function(t){e.setUserColorPrefix("B")}}},[n("div",{staticClass:"text-primary"},[e._v("Blue")])]),n("b-dropdown-divider"),n("b-dropdown-item",{on:{click:function(t){e.setUserColorPrefix("random")}}},[n("div",{staticClass:"text-secondary"},[e._v("Random")])])],1)],1)],1)],1),e.user?n("b-nav-item-dropdown",{attrs:{right:""},on:{click:function(t){e.$logout()}}},[n("template",{slot:"button-content"},[n("i",{staticClass:"fa fa-user mr-2"}),e._v(e._s(e.user.name?e.user.name:e.user.login)+" "),e.user.name?n("div",{staticClass:"username"},[e._v(e._s(e.user.login))]):e._e()]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.user",modifiers:{user:!0}}]},[e._v("Сменить пользователя")]),n("b-dropdown-item",{on:{click:function(t){e.$logout()}}},[e._v("Выход")])],2):n("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.user",modifiers:{user:!0}}],attrs:{right:""}},[e._v(" Войти")])],1)],1):n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.depcode",modifiers:{depcode:!0}}],attrs:{right:""}},[e._v("Установить Индекс")])],1)],1),n("b-container",[n("Console")],1),n("div",{staticClass:"bd-footer text-muted"},[n("p",{staticClass:"mb-2 pl-5"},[e._v('© 2019 Copyright. Система "Умные Полки" для ПУС. Разработка by tastamat.com. Версия '),n("b",[e._v(e._s(e.$root.version)+" ")]),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.about",modifiers:{about:!0}}],staticClass:"ml-4"},[e._v("Credits ")]),e._v("| "),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.help",modifiers:{help:!0}}]},[e._v("Manual ")]),e._v("| "),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.stats",modifiers:{stats:!0}}]},[e._v("Stats ")]),e._v("| "),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.debug",modifiers:{debug:!0}}]},[n("i",{staticClass:"fa fa-bug ml-1"})])],1)]),n("Keyboard"),e.isSortplanModalOpen?n("SortplanModal",{on:{hide:function(t){e.isSortplanModalOpen=!1}}}):e._e(),n("b-modal",{attrs:{id:"depcode",title:"Технологический Индекс",centered:"",size:"sm","ok-only":""},on:{ok:function(t){e.registerDepcode(e.tmpDepcode)},hide:function(t){e.tmpDepcode=""}}},[n("b-form-input",{staticClass:"nokeyboard",attrs:{autofocus:"",placeholder:e.depcode},nativeOn:{dblclick:function(t){e.demo&&(e.tmpDepcode="220081")}},model:{value:e.tmpDepcode,callback:function(t){e.tmpDepcode=t},expression:"tmpDepcode"}})],1),n("b-modal",{attrs:{id:"user",size:"sm",title:"Авторизация*","modal-class":{isLoginError:e.loginResponse},centered:""},on:{hide:function(t){e.tmpUser=""}}},[n("b-form-group",{attrs:{"invalid-feedback":"Ошибка! ["+e.tmpUser+"] "+e.loginResponse,state:!e.loginResponse}},[n("b-form-input",{staticClass:"nokeyboard",attrs:{size:"lg",placeholder:"Ваш логин в ПУС",autofocus:""},nativeOn:{dblclick:function(t){e.demo&&(e.tmpUser="test.ast17.sc1")}},model:{value:e.tmpUser,callback:function(t){e.tmpUser=t},expression:"tmpUser"}})],1),n("template",{slot:"modal-footer"},[n("b-btn",{attrs:{variant:"primary",disabled:!e.tmpUser},on:{click:function(t){e.login(e.tmpUser)}}},[e._v("Вход")])],1)],2),n("b-modal",{attrs:{id:"help",title:"Инструкция",lazy:"",size:"lg","hide-footer":!0}},[n("HelpModal")],1),n("b-modal",{attrs:{id:"about","hide-header":"",size:"lg",lazy:"","hide-footer":"",scrollable:"","body-bg-variant":"dark","body-text-variant":"white"}},[n("AboutModal")],1),n("b-modal",{attrs:{id:"stats",title:"Статистика",lazy:"",size:"lg","hide-footer":!0}},[n("StatsModal")],1),n("b-modal",{attrs:{id:"badge",title:"Беджики",lazy:"",scrollable:"","ok-title":"Печать","ok-only":""},on:{ok:e.$print}},[n("BadgeModal")],1),n("b-modal",{attrs:{id:"demoprint",title:"Шаблон",scrollable:"",lazy:"",size:"lg","ok-only":"","ok-title":"Печать"},on:{ok:e.$print}},[n("DemoPrintModal")],1),n("b-modal",{attrs:{id:"diagnostic",title:"Диагностика",lazy:"","hide-footer":""}},[n("DiagnosticModal")],1),n("b-modal",{attrs:{id:"debug","hide-header":"",size:"lg","hide-footer":"",scrollable:"","body-bg-variant":"dark"}},[n("pre",[e._v(e._s(e.consoles))]),n("pre",[e._v(e._s(e.bags))])]),n("MultiLedModal")],1):e._e()},[],!1,at,null,null).exports,it=n("Tqaz"),rt={install:function(e){Object.defineProperty(e.prototype,"$http",{value:x.a})}},lt=(n("sax8"),n("mmfr")),ct=n.n(lt);i.default.use(ct.a);var dt=new ct.a({version:1,database:"sortrack",schemas:[{settings:"id,meta_.updated"}],options:{settings:{type:"list",primary:"id",label:"id",updated_at:"meta_.updated"}}}),ut={state:{sortplan:null,calibrating:!1,demoBarcodes:null,loginResponse:null,closeModal:null,color:null},getters:{getCalibrating:function(e){return e.calibrating},getLastBag:function(e,t){return t.config.bags?t.config.bags[t.config.bags.length-1]:null},config:function(e,t){return t.getSettingsSelected},getConfig:function(e,t){return t.config},getSortplan:function(e){return e.sortplan},getDepcode:function(e,t){return t.config?t.config.depcode:null},getLedOn:function(e,t){return t.config?t.config.isLedOn:null},getDemo:function(e,t){return t.config?t.config.isDemo:null},getDemoBarcodes:function(e){return e.demoBarcodes},getUser:function(e,t){return t.config?t.config.user:null},getLoginResponse:function(e){return e.loginResponse},getCloseError:function(e){return e.closeModal?e.closeModal.error:null}},actions:{$onHydrated:function(e){e.commit;var t=e.dispatch,n=(e.state,e.getters);t("settingsSelect",n.getSettings[0]),n.getBags||t("$initBags"),t("$initSettings"),t("$clearInserted")},$initSettings:function(e){e.commit,e.dispatch,e.state;var t=e.getters;D.init(t.config.leds,t.config.isLedOn,t.config.size,t.getLastBag.led,function(e){})},$initBags:function(e){e.commit,e.dispatch,e.state;var t=e.getters;console.log("initBags",t.getConfig.size);var n=[3,2,1,0,12,13,14,15,7,6,5,4,16,17,18,19,11,10,9,8,20,21,22,23];t.getConfig.bags=[].concat(m()(new Array(Number(t.getConfig.size)||24))).map(function(e,t){return{ppi:"#"+t,led:n[t%24],ppn:null,wpi:{},batch:[]}}),t.getConfig.leds=[].concat(m()(new Array(t.getConfig.size/24))).map(function(e,t){return"192.168.10.10"}),t.getLastBag.isErrorBag=!0},$save:function(e){e.commit;var t=e.dispatch;e.state;t("settingsUpdate",e.getters.getSettingsSelected)},$fillBags:function(e,t){e.commit;var n=e.dispatch,o=(e.state,e.getters),a=t.plan;o.getConfig.bags.forEach(function(e,t){a[t]&&(o.getConfig.bags[t]=d()({},e,{ppi:a[t].techindex,ppn:a[t].nameRu,wpi:{}}))}),n("$save")},$fetchSortplan:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.depcode;return T(s).then(function(e){return o.sortplan=e.data.parentPostIndexes,console.log("sortplan",o.sortplan),i.default.set(a.getConfig,"sortplan",o.sortplan),n("$save"),e}).catch(function(e){throw o.sortplan=null,o.status="error",o.error=e,e})},$login:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.user;return B(s,a.getDepcode).then(function(e){o.status="login",i.default.set(a.getConfig,"user",{login:s,name:e.data.name}),n("$save")}).catch(function(e){throw o.status="error",o.loginResponse=e,e})},$logout:function(e){e.commit;var t=e.dispatch,n=e.state,o=e.getters;i.default.set(o.getConfig,"user",null),n.status="logout",t("$save")},$fetchDemoRPO:function(e){e.commit,e.dispatch;var t=e.state,n=e.getters;return $(n.getDepcode).then(function(e){t.demoBarcodes=e.data.mails,console.log("fetchRPO",t.demoBarcodes)}).catch(function(e){throw t.status="error",t.error=e,e})},$registerDepcode:function(e,t){e.commit;var n=e.dispatch,o=e.state,a=e.getters,s=t.depcode;a.getConfig.depcode=s,console.log("$registerdepcode",s),o.status="registerpoint",n("$save"),n("$fetchSortplan",{depcode:s})},$togleDemo:function(e,t){e.commit;var n=e.dispatch,o=(e.state,e.getters),a=t.val;return o.getConfig.isDemo=void 0!==a?a:!o.getConfig.isDemo,n("$save")},$togleLed:function(e,t){e.commit;var n=e.dispatch,o=(e.state,e.getters),a=t.val;return o.getConfig.isLedOn=void 0!==a?a:!o.getConfig.isLedOn,n("$save")},$setColor:function(e,t){e.commit,e.dispatch;var n=e.state;e.getters;console.log("$setColor",t),n.color=t}},mutations:{}};i.default.use(g.a);var pt=new g.a.Store({state:{hydrated:!1},mutations:{DELETE_INDEXED_DB:function(){}},modules:d()({},dt.modules,{polka:V,polkaUtils:ut}),getters:{hydrated:function(e){return e.hydrated}},plugins:[dt.plugin],strict:!1}),gt=(n("Jmt5"),n("9M+g"),n("HSQo")),ft=n.n(gt),mt=new i.default;ft()(i.default.prototype,{$bus:{get:function(){return mt}}});var bt=n("G+GS"),ht=n.n(bt);i.default.filter("json2html",function(e,t){return ht()(e,t)}),i.default.filter("kg",function(e){return e&&(e=(Number(e)/1e3).toFixed(3)),e}),i.default.directive("focus",{inserted:function(e){e.focus()}});i.default.filter("rpad",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:37;return(String(e).padEnd(n-String(t).length)+t).substring(0,n)}),i.default.filter("cols",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:17;return String(t).padStart(n).substring(0,n)+String(e).padStart(o).substring(0,o)}),i.default.filter("lpad",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:37;return(String(t).padEnd(n-String(e).length)+e).substring(0,n)}),i.default.filter("pad",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:37;return String(e).padEnd(t).substring(0,t)}),i.default.filter("padcenter",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:37,n=String(e).length,o=t-n;return o>0&&(o=Math.floor(o/2)+n),String(e).padStart(o).padEnd(t).substring(0,t)}),i.default.use(it.a),i.default.use(rt),i.default.use(ct.a),i.default.config.productionTip=!1,i.default.prototype.$store=pt,i.default.mixin({methods:{$resetData:function(e){console.log("reset global data =",this.$options.name),s()(this.$data,this.$options.data.call(this)),(null!==e&&e||null==e)&&this.$emit("reset",null)},$_clone:function(e){return s()({},e)},$:function(e){return document.querySelector(e)},$ArrayRemoveElement:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},$print:function(){window.print()}}}),console.log("chuhan","production");new i.default({el:"#app",data:function(){return{offline:!1,mqttOnline:!1,isInFocusInput:!1,version:"3.5.58"}},created:function(){window.addEventListener("online",this.checkOnline),window.addEventListener("offline",this.checkOnline),this.checkOnline()},mounted:function(){},beforeDestroy:function(){window.removeEventListener("online",this.checkOnline),window.removeEventListener("offline",this.checkOnline)},store:pt,methods:{checkOnline:function(){console.log("check offline",!navigator.onLine),this.offline=!navigator.onLine}},render:function(e){return e(st)}})},Tpzo:function(e,t){},U1KQ:function(e,t){},VQp2:function(e,t){},Vy1y:function(e,t){},Wsz4:function(e,t){},YKOQ:function(e,t){},YSt1:function(e,t){},aITT:function(e,t){},cipd:function(e,t){},"wn/K":function(e,t){},y5oS:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cb4b5eaef98a66eb493d.js.map